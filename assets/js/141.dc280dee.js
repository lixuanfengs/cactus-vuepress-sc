(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{490:function(e,a,s){"use strict";s.r(a);var t=s(0),r=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),a("p",[e._v("你给面试官说：“我阅读过 Dubbo 的源码，觉得那块设计的比较好”。结果，你自己连Dubbo 源码阅读环境都没搭建过的话，尴尬不？")]),e._v(" "),a("p",[e._v("Dubbo官方也有对应的源码环境搭建教程（@"),a("a",{attrs:{href:"https://dubbo.apache.org/zh/docs/v2.7/dev/build/",target:"_blank",rel:"noopener noreferrer"}},[e._v("源码构建"),a("OutboundLink")],1),e._v("），不过我的更详细完善一点。并且，更清晰易懂。一些你们可能我踩的坑，我都提前指了出来，避免没有必要的时间浪费。")]),e._v(" "),a("h2",{attrs:{id:"环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[e._v("#")]),e._v(" 环境准备")]),e._v(" "),a("ul",[a("li",[e._v("IDEA：建议使用 IDEA 作为 IDE。")]),e._v(" "),a("li",[e._v("Maven 3.6.5 ：Dubbo 使用 "),a("a",{attrs:{href:"http://maven.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("maven"),a("OutboundLink")],1),e._v(" 作为构建工具。")]),e._v(" "),a("li",[e._v("JDK 1.8  ：JDK 1.8 版本即可。")])]),e._v(" "),a("h2",{attrs:{id:"dubbo-源码阅读环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-源码阅读环境搭建"}},[e._v("#")]),e._v(" Dubbo 源码阅读环境搭建")]),e._v(" "),a("h3",{attrs:{id:"克隆项目到本地"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#克隆项目到本地"}},[e._v("#")]),e._v(" 克隆项目到本地")]),e._v(" "),a("p",[e._v("我们先克隆项目到本地(建议 fork 一份项目到自己的仓库中再克隆，版本建议 dubbo-2.6.4)。")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/apache/dubbo.git dubbo\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"使用-idea-打开项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-idea-打开项目"}},[e._v("#")]),e._v(" 使用 IDEA 打开项目")]),e._v(" "),a("p",[e._v("项目克隆完成之后，推荐使用 IDEA 打开。打开之后，可能需要一会时间下载项目所依赖的 jar包，我们喝杯咖啡，耐心等待即可。")]),e._v(" "),a("p",[e._v("下载jar包的过程中，很可能会遇到某些 jar 包出现问题的情况，导致项目多处报红，显示相关依赖导入错误。解决的办法就是：你去自己本地的 Maven仓库找到对应的  jar 包，将其删除，然后重新导入项目下载即可。")]),e._v(" "),a("h3",{attrs:{id:"构建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建项目"}},[e._v("#")]),e._v(" 构建项目")]),e._v(" "),a("p",[e._v("如果我们的项目相关的 jar 包下载完成，我们就可以开始构建项目了。你可以使用下面两种方式的任意一种：")]),e._v(" "),a("p",[a("strong",[e._v("（1）使用下面的命令构建项目了：")])]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("mvn "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-Dmaven.test.skip")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#构建并跳过单元测试")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("（2）不同过命令的方式：")])]),e._v(" "),a("p",[e._v("首先点击跳过测试，然后点击clean 和 install。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/source-code/dubbo/image-20210109143410342.png",alt:"img"}})]),e._v(" "),a("h3",{attrs:{id:"验证源码环境是否搭建成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证源码环境是否搭建成功"}},[e._v("#")]),e._v(" 验证源码环境是否搭建成功")]),e._v(" "),a("p",[e._v("这些事情做完之后，我们需要验证一下 Dubbo 源码阅读环境是否真的搭建成功了。"),a("strong",[e._v("怎么来验证呢？")])]),e._v(" "),a("p",[e._v("非常简单，不需要自己手动写 Demo 了。项目源码已经自带了一些使用 Dubbo 的Demo，我们直接运行即可。")]),e._v(" "),a("p",[e._v("我们找到 "),a("code",[e._v("dubbo-demo")]),e._v(" 这个文件夹，里面包含了 3 种不同类型（xml、api、annotation）使用方式的 demo，可以帮助我们节省掉大量写 Demo 的时间。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/source-code/dubbo/image-20210109145620437.png",alt:"img"}})]),e._v(" "),a("p",[e._v("这些 Demo 都是使用 zookeepeer 作为注册中心的，所以我们还需要提前下载 zookeeper 到本地。")]),e._v(" "),a("p",[e._v("我这里建议下载 3.4.12 版本的 zookeeper ,避免出现其他问题。我们直接使用 Docker 进行下载就行了，方便简单。")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull zookeeper:3.4.12\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("然后，使用下面的命令运行。")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" zookeeper3.4.12 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2181")]),e._v(":2181 zookeeper:3.4.12\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("我们随便找到一个 Demo ，我这里以 api 使用的方式来说明一下。")]),e._v(" "),a("p",[e._v("我们找到 "),a("code",[e._v("dubbo-demo-api")]),e._v(" 这个文件夹，然后先启动服务提供者，再启动服务生产者：")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("启动服务提供者")]),e._v(" ：直接运行 "),a("code",[e._v("dubbo-demo-api-provider")]),e._v(" （服务提供者）下的 "),a("code",[e._v("Application")]),e._v("  即可。服务提供者启动成功之后，控制台会打印出服务被注册的一些信息。")]),e._v(" "),a("li",[a("strong",[e._v("启动服务消费者")]),e._v(" ：直接运行 "),a("code",[e._v("dubbo-demo-api-consumer")]),e._v(" （服务提供者）下的 "),a("code",[e._v("Application")]),e._v("  即可。服务消费者启动成功之后，控制台会打印出调用服务提供者的"),a("code",[e._v("sayHello()")]),e._v("方法返回的结果。")])]),e._v(" "),a("p",[e._v("启动过程中可能会出现的问题："),a("code",[e._v("java.nio.channels.UnresolvedAddressException")]),e._v(" 。")]),e._v(" "),a("p",[e._v("出现这种问题的原因大概是你的 JDK 版本是 JDK14,你只需要将 JDK 版本调整到对应的 JDK 8 即可。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/source-code/dubbo/image-20210109145402396.png",alt:"img"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);