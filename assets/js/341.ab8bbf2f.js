(window.webpackJsonp=window.webpackJsonp||[]).push([[341],{689:function(n,r,s){"use strict";s.r(r);var a=s(0),e=Object(a.a)({},(function(){var n=this,r=n._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[r("p",[n._v("前后分离架构下肯定会遇到跨域的问题，因为我们的请求都是通过微服务网关来转发的，所以我们可以在网关处统一处理跨域。")]),n._v(" "),r("p",[n._v("在febs-gateway模块下的cc.mrbird.febs.gateway.configure模块下新建"),r("code",[n._v("FebsGateWayCorsConfigure")]),n._v("配置类:")]),n._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[n._v('package cc.mrbird.febs.gateway.configure;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\nimport org.springframework.web.filter.CorsFilter;\n\n/**\n * @author MrBird\n */\n@Configuration\npublic class FebsGateWayCorsConfigure {\n\n    @Bean\n    public CorsFilter corsFilter() {\n        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        final CorsConfiguration corsConfiguration = new CorsConfiguration();\n        corsConfiguration.setAllowCredentials(true);\n        corsConfiguration.addAllowedHeader(CorsConfiguration.ALL);\n        corsConfiguration.addAllowedOrigin(CorsConfiguration.ALL);\n        corsConfiguration.addAllowedMethod(CorsConfiguration.ALL);\n        source.registerCorsConfiguration("/**", corsConfiguration);\n        return new CorsFilter(source);\n    }\n}\n')])]),n._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[n._v("1")]),r("br"),r("span",{staticClass:"line-number"},[n._v("2")]),r("br"),r("span",{staticClass:"line-number"},[n._v("3")]),r("br"),r("span",{staticClass:"line-number"},[n._v("4")]),r("br"),r("span",{staticClass:"line-number"},[n._v("5")]),r("br"),r("span",{staticClass:"line-number"},[n._v("6")]),r("br"),r("span",{staticClass:"line-number"},[n._v("7")]),r("br"),r("span",{staticClass:"line-number"},[n._v("8")]),r("br"),r("span",{staticClass:"line-number"},[n._v("9")]),r("br"),r("span",{staticClass:"line-number"},[n._v("10")]),r("br"),r("span",{staticClass:"line-number"},[n._v("11")]),r("br"),r("span",{staticClass:"line-number"},[n._v("12")]),r("br"),r("span",{staticClass:"line-number"},[n._v("13")]),r("br"),r("span",{staticClass:"line-number"},[n._v("14")]),r("br"),r("span",{staticClass:"line-number"},[n._v("15")]),r("br"),r("span",{staticClass:"line-number"},[n._v("16")]),r("br"),r("span",{staticClass:"line-number"},[n._v("17")]),r("br"),r("span",{staticClass:"line-number"},[n._v("18")]),r("br"),r("span",{staticClass:"line-number"},[n._v("19")]),r("br"),r("span",{staticClass:"line-number"},[n._v("20")]),r("br"),r("span",{staticClass:"line-number"},[n._v("21")]),r("br"),r("span",{staticClass:"line-number"},[n._v("22")]),r("br"),r("span",{staticClass:"line-number"},[n._v("23")]),r("br"),r("span",{staticClass:"line-number"},[n._v("24")]),r("br"),r("span",{staticClass:"line-number"},[n._v("25")]),r("br"),r("span",{staticClass:"line-number"},[n._v("26")]),r("br")])]),r("p",[n._v("该配置类里注册了"),r("code",[n._v("CorsFilter")]),n._v(":")]),n._v(" "),r("ul",[r("li",[r("code",[n._v("setAllowCredentials(true)")]),n._v("表示允许cookie跨域；")]),n._v(" "),r("li",[r("code",[n._v("addAllowedHeader(CorsConfiguration.ALL)")]),n._v("表示请求头部允许携带任何内容；")]),n._v(" "),r("li",[r("code",[n._v("addAllowedOrigin(CorsConfiguration.ALL)")]),n._v("表示允许任何来源；")]),n._v(" "),r("li",[r("code",[n._v("addAllowedMethod(CorsConfiguration.ALL)")]),n._v("表示允许任何HTTP方法。")])])])}),[],!1,null,null,null);r.default=e.exports}}]);