(window.webpackJsonp=window.webpackJsonp||[]).push([[374],{723:function(s,n,a){"use strict";a.r(n);var e=a(0),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"k8s集群中发现外部服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#k8s集群中发现外部服务"}},[s._v("#")]),s._v(" K8S集群中发现外部服务")]),s._v(" "),n("p",[s._v("要在K8S集群中访问外部服务，你可能会想当然的直接节通过IP和端口访问，这种方式可行，但不是最好的方式。在K8S集群内部访问外部服务的最佳实践是："),n("strong",[s._v("通过K8S的资源对象Endpoints绑定外部资源，然后建立与该Endpoints对应的Service，这样K8S集群内部服务直接通过Service的名称就能访问外部服务了（得益于kube-dns）")]),s._v("。这种方式的好处是可以将内部服务和外部服务解耦，无论是外部服务后期迁移了，或者移植到K8S集群内部了，我们只要修改对应的Endpoints即可。这种模式示意图如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/09/Qwvp6O.png",alt:"607.png"}})]),s._v(" "),n("p",[s._v("截至目前，我们已经部署好的外部服务，后续K8S集群内部需要用到的有：")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[s._v("服务名")]),s._v(" "),n("th",{staticStyle:{"text-align":"left"}},[s._v("IP地址")]),s._v(" "),n("th",{staticStyle:{"text-align":"left"}},[s._v("端口号")])])]),s._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("MySQL")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("192.168.33.16")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("3306")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("Redis")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("192.168.33.16")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("6379")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("logstash")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("192.168.33.16")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("4560")])])])]),s._v(" "),n("p",[s._v("我们需要K8S集群内部构建相应的Service和Endpoints来对应这3个外部服务。")]),s._v(" "),n("p",[s._v("在master虚拟机的/home/vagrant目录下新建febs-k8s目录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir /home/vagrant/febs-k8s\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然后切换到该目录下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /home/vagrant/febs-k8s\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("创建extends-service.yml配置文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 映射外部MySQL服务\napiVersion: v1\nkind: Service\nmetadata:\n  name: febs-mysql-service\nspec:\n  ports:\n    - protocol: TCP\n      port: 3306\n      targetPort: 3306\n---\napiVersion: v1\nkind: Endpoints\nmetadata:\n  name: febs-mysql-service\nsubsets:\n  - addresses:\n      - ip: 192.168.33.16\n    ports:\n      - port: 3306\n---\n# 映射外部Redis服务\napiVersion: v1\nkind: Service\nmetadata:\n  name: febs-redis-service\nspec:\n  ports:\n    - protocol: TCP\n      port: 6379\n      targetPort: 6379\n---\napiVersion: v1\nkind: Endpoints\nmetadata:\n  name: febs-redis-service\nsubsets:\n  - addresses:\n      - ip: 192.168.33.16\n    ports:\n      - port: 6379\n---\n# 映射外部logstash服务\napiVersion: v1\nkind: Service\nmetadata:\n  name: logstash-service\nspec:\n  ports:\n    - protocol: TCP\n      port: 4560\n      targetPort: 4560\n---\napiVersion: v1\nkind: Endpoints\nmetadata:\n  name: logstash-service\nsubsets:\n  - addresses:\n      - ip: 192.168.33.16\n    ports:\n      - port: 4560\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br")])]),n("p",[s._v("创建该资源：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl apply -f extends-service.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("创建好后，我们挑个Service，看看它是否真正已经挂载上：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl describe service/febs-mysql-service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/09/Qwz9dH.png",alt:"609.png"}})]),s._v(" "),n("p",[s._v("可以看到Endpoints正是我们指定的MySQL的IP和端口。")]),s._v(" "),n("h2",{attrs:{id:"创建configmap"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建configmap"}},[s._v("#")]),s._v(" 创建ConfigMap")]),s._v(" "),n("p",[s._v("为了方便待会在FEBS微服务K8S配置文件中使用这些Service，我们在master虚拟机的/home/vagrant/febs-k8s路径下创建个febs-configmap.yml配置文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: febs-cm\ndata:\n  febs.mysql.url: "febs-mysql-service" # 对应K8S集群外部MySQL服务Service\n  febs.redis.url: "febs-redis-service" # 对应K8S集群外部Redis服务Service\n  febs.auth.url: "febs-auth-service" # 对应K8S集群内部febs-auth服务Service\n  nacos.url: "nacos-service" # 对应K8S集群内部nacos服务Service\n  febs.monitor.admin.url: "febs-monitor-admin-service" # 对应K8S集群内部febs-monitor-admin服务Service\n  febs.gateway.url: "febs-gateway-service" # 对应K8S集群内部febs-gateway服务Service\n  logstash.url: "logstash-service" # 对应K8S集群外部logstash服务Service\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("创建该资源：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl apply -f febs-configmap.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/09/Q0SUjf.png",alt:"610.png"}})]),s._v(" "),n("h2",{attrs:{id:"搭建febs-auth集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建febs-auth集群"}},[s._v("#")]),s._v(" 搭建febs-auth集群")]),s._v(" "),n("p",[s._v("在master虚拟机的/home/vagrant/febs-k8s目录下新建febs-auth-cluster.yml配置文件:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('apiVersion: v1\nkind: Service\nmetadata:\n  name: febs-auth-service\nspec:\n  ports:\n    - port: 8101\n      targetPort: 8101\n  selector:\n    name: febs-auth\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: febs-auth-d\nspec:\n  selector:\n    matchLabels:\n      name: febs-auth\n  replicas: 2 # 2实例集群\n  template:\n    metadata:\n      labels:\n        name: febs-auth\n    spec:\n      containers:\n        - name: febs-auth\n          image: docker.mrbird.cc/febs/febs-auth:latest\n          imagePullPolicy: IfNotPresent\n          ports:\n            - containerPort: 8101\n          args:\n            - "--spring.profiles.active=prod"\n          env: # 从configmap加载配置到环境变量\n            - name: mysql.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.mysql.url\n            - name: redis.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.redis.url\n            - name: nacos.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: nacos.url\n            - name: logstash.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: logstash.url\n            - name: febs-monitor-admin\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.monitor.admin.url\n            - name: TZ\n              value: "Asia/Shanghai"\n          volumeMounts:\n            - mountPath: /log\n              name: febs-auth-data\n          # 虚拟机资源有限，对资源进行限制\n          resources:\n            requests:\n              cpu: 0.5\n              memory: 300Mi\n            limits:\n              cpu: 1\n              memory: 500Mi\n      volumes: # 日志挂载到NFS服务器\n        - name: febs-auth-data\n          nfs:\n            path: /nfs/log\n            server: 192.168.33.15\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br")])]),n("p",[s._v("上面配置文件创建了一个2Pod实例的febs-auth Deployment，并且创建了一个用于发现febs-auth服务的Service。在创建该资源之前，我们要先到NFS服务器下创建/nfs/log目录：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrM5S1.png",alt:"618.png"}})]),s._v(" "),n("p",[s._v("然后回到master虚拟机上，创建该资源：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl apply -f febs-auth-cluster.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/Qr6OAg.png",alt:"612.png"}})]),s._v(" "),n("p",[s._v("挑个Pod看看日志:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl logs pod/febs-auth-d-859844b456-hgxgb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrcCuV.png",alt:"616.png"}})]),s._v(" "),n("p",[s._v("在Windows下访问Nacos控制台，查看服务列表一栏：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QroQSS.png",alt:"617.png"}})]),s._v(" "),n("p",[s._v("说明febs-auth集群搭建成功。")]),s._v(" "),n("h2",{attrs:{id:"搭建febs-gateway集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建febs-gateway集群"}},[s._v("#")]),s._v(" 搭建febs-gateway集群")]),s._v(" "),n("p",[s._v("接着在master虚拟机的/home/vagrant/febs-k8s目录下新建febs-gateway-cluster.yml配置文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('apiVersion: v1\nkind: Service\nmetadata:\n  name: febs-gateway-service\nspec:\n  ports:\n    - port: 8301\n      targetPort: 8301\n  selector:\n    name: febs-gateway\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: febs-gateway\nspec:\n  selector:\n    matchLabels:\n      name: febs-gateway\n  replicas: 2\n  template:\n    metadata:\n      labels:\n        name: febs-gateway\n    spec:\n      containers:\n        - name: febs-gateway\n          image: docker.mrbird.cc/febs/febs-gateway:latest\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 8301\n          env:\n            - name: nacos.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: nacos.url\n            - name: logstash.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: logstash.url\n            - name: febs-monitor-admin\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.monitor.admin.url\n            - name: TZ\n              value: "Asia/Shanghai"\n          resources:\n            requests:\n              cpu: 0.3\n              memory: 300Mi\n            limits:\n              cpu: 1\n              memory: 500Mi\n          volumeMounts:\n            - mountPath: /log\n              name: febs-gateway-data\n      volumes:\n        - name: febs-gateway-data\n          nfs:\n            path: /nfs/log\n            server: 192.168.33.15\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br")])]),n("p",[s._v("上面配置文件创建了一个2Pod实例的febs-gateway Deployment，并且创建了一个用于发现febs-gateway服务的Service。大体配置和febs-auth-cluster.yml差不多。")]),s._v(" "),n("p",[s._v("创建该资源：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl apply -f febs-gateway-cluster.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("观察Pod创建情况：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrTnB9.png",alt:"619.png"}})]),s._v(" "),n("p",[s._v("Pod运行成功，挑个看下日志输出：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl logs pod/febs-gateway-7484b57544-7n6hd\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrT81O.png",alt:"620"}})]),s._v(" "),n("p",[s._v("应用启动成功。")]),s._v(" "),n("p",[s._v("查看Nacos控制台：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrTgBj.png",alt:"621.png"}})]),s._v(" "),n("p",[s._v("服务也已经成功注册到Nacos中。")]),s._v(" "),n("h2",{attrs:{id:"搭建febs-server-system集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建febs-server-system集群"}},[s._v("#")]),s._v(" 搭建febs-server-system集群")]),s._v(" "),n("p",[s._v("接着在master虚拟机的/home/vagrant/febs-k8s目录下新建febs-server-system-cluster.yml配置文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: febs-server-system-d\nspec:\n  selector:\n    matchLabels:\n      name: febs-server-system\n  replicas: 2\n  template:\n    metadata:\n      labels:\n        name: febs-server-system\n    spec:\n      containers:\n        - name: febs-server-system\n          image: docker.mrbird.cc/febs/febs-server-system:latest\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 8201\n          args:\n            - "--spring.profiles.active=prod"\n          env:\n            - name: mysql.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.mysql.url\n            - name: nacos.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: nacos.url\n            - name: logstash.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: logstash.url\n            - name: febs-gateway\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.gateway.url\n            - name: febs-monitor-admin\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.monitor.admin.url\n            - name: TZ\n              value: "Asia/Shanghai"\n          volumeMounts:\n            - mountPath: /log\n              name: febs-server-system-data\n          resources:\n            requests:\n              cpu: 0.3\n              memory: 300Mi\n            limits:\n              cpu: 1\n              memory: 500Mi\n      volumes:\n        - name: febs-server-system-data\n          nfs:\n            path: /nfs/log\n            server: 192.168.33.15\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br")])]),n("p",[s._v("上面配置文件创建了一个2Pod实例的febs-server-system Deployment，大体配置和febs-auth-cluster.yml差不多。此外，因为别的服务并不依赖于febs-server-system，所以我们不需要创建对应的Service。")]),s._v(" "),n("p",[s._v("创建该资源：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl apply -f febs-server-system-cluster.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("观察Pod创建情况：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/Qr7Qbj.png",alt:"622.png"}})]),s._v(" "),n("p",[s._v("同样地，挑选一个查看日志：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl logs febs-server-system-d-67fddfbb8-r8x5x\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/Qr7yPx.png",alt:"623.png"}})]),s._v(" "),n("p",[s._v("查看Nacos控制台：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/Qr7fqH.png",alt:"624.png"}})]),s._v(" "),n("p",[s._v("服务已经注册成功。")]),s._v(" "),n("h2",{attrs:{id:"搭建febs-server-test集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建febs-server-test集群"}},[s._v("#")]),s._v(" 搭建febs-server-test集群")]),s._v(" "),n("p",[s._v("同样的，继续在master虚拟机的/home/vagrant/febs-k8s目录下新建febs-server-test-cluster.yml配置文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: febs-server-test-d\nspec:\n  selector:\n    matchLabels:\n      name: febs-server-test\n  replicas: 2\n  template:\n    metadata:\n      labels:\n        name: febs-server-test\n    spec:\n      containers:\n        - name: febs-server-test\n          image: docker.mrbird.cc/febs/febs-server-test:latest\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 8202\n          env:\n            - name: nacos.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: nacos.url\n            - name: febs-gateway\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.gateway.url\n            - name: logstash.url\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: logstash.url\n            - name: febs-monitor-admin\n              valueFrom:\n                configMapKeyRef:\n                  name: febs-cm\n                  key: febs.monitor.admin.url\n            - name: TZ\n              value: "Asia/Shanghai"\n          volumeMounts:\n            - mountPath: /log\n              name: febs-server-test-data\n          resources:\n            requests:\n              cpu: 0.2\n              memory: 300Mi\n            limits:\n              cpu: 1\n              memory: 500Mi\n      volumes:\n        - name: febs-server-test-data\n          nfs:\n            path: /nfs/log\n            server: 192.168.33.15\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])]),n("p",[s._v("上面配置文件创建了一个2Pod实例的febs-server-test Deployment，大体配置和febs-server-test-cluster.yml差不多。此外，因为别的服务也不依赖于febs-server-test，所以我们不需要创建对应的Service。")]),s._v(" "),n("p",[s._v("创建该资源：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("kubectl apply -f febs-server-test-cluster.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然后观察Pod创建情况：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/Qr7zon.png",alt:"625.png"}})]),s._v(" "),n("p",[s._v("挑选任意Pod观察日志:")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrHQSK.png",alt:"626.png"}})]),s._v(" "),n("p",[s._v("查看Nacos控制台：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrHywj.png",alt:"627.png"}})]),s._v(" "),n("p",[s._v("到这里，我们的后台微服务集群已经都搭建起来了。我们可以简单的发送一笔测试。查看febs-gateway对应的Service ClusterIP：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/Qrb97d.png",alt:"628.png"}})]),s._v(" "),n("p",[s._v("发送请求：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.ax1x.com/2019/12/11/QrbnBQ.png",alt:"629.png"}})]),s._v(" "),n("p",[s._v("这大体说明我们的服务是通的。下面一节我们将接入FEBS-Cloud-Web，测试我们的集群可用性。")])])}),[],!1,null,null,null);n.default=t.exports}}]);