<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于阿里Seata方案🌱 | Cactusli blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3129839_xft6cqs5gc.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/artalk/2.5.5/Artalk.css">
    <script src="https://cdn.bootcdn.net/ajax/libs/artalk/2.5.5/Artalk.js"></script>
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?efc65c9365211267213266ca9b95b304"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="后端技术博客,专注前后端学习与总结。Java,JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="后端端博客,个人技术博客,后端,后端开发,前端框架,Java后端,后端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="codeva-nBtnwPHxXt">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.b8eeafc3.css" as="style"><link rel="preload" href="/assets/js/app.d73578e6.js" as="script"><link rel="preload" href="/assets/js/2.f6444e8b.js" as="script"><link rel="preload" href="/assets/js/382.ff24e162.js" as="script"><link rel="preload" href="/assets/js/13.9ca28764.js" as="script"><link rel="preload" href="/assets/js/6.0f00df03.js" as="script"><link rel="preload" href="/assets/js/5.1368437e.js" as="script"><link rel="preload" href="/assets/js/4.7c9e6596.js" as="script"><link rel="prefetch" href="/assets/js/10.af60255b.js"><link rel="prefetch" href="/assets/js/100.3ef796c4.js"><link rel="prefetch" href="/assets/js/101.aae7784e.js"><link rel="prefetch" href="/assets/js/102.8da091f1.js"><link rel="prefetch" href="/assets/js/103.ad0dd5b7.js"><link rel="prefetch" href="/assets/js/104.642836fc.js"><link rel="prefetch" href="/assets/js/105.f3c5bcec.js"><link rel="prefetch" href="/assets/js/106.85dad7d8.js"><link rel="prefetch" href="/assets/js/107.42b1c013.js"><link rel="prefetch" href="/assets/js/108.2a978b6c.js"><link rel="prefetch" href="/assets/js/109.46c8b7c6.js"><link rel="prefetch" href="/assets/js/11.372f8efb.js"><link rel="prefetch" href="/assets/js/110.2cb8a5dc.js"><link rel="prefetch" href="/assets/js/111.c68e8975.js"><link rel="prefetch" href="/assets/js/112.d89adde5.js"><link rel="prefetch" href="/assets/js/113.e52ab124.js"><link rel="prefetch" href="/assets/js/114.94f7a70b.js"><link rel="prefetch" href="/assets/js/115.68c55722.js"><link rel="prefetch" href="/assets/js/116.9cdf5c61.js"><link rel="prefetch" href="/assets/js/117.34a7707c.js"><link rel="prefetch" href="/assets/js/118.e9922234.js"><link rel="prefetch" href="/assets/js/119.61fe4a4e.js"><link rel="prefetch" href="/assets/js/12.1061ddb5.js"><link rel="prefetch" href="/assets/js/120.fe5311f5.js"><link rel="prefetch" href="/assets/js/121.905e8e51.js"><link rel="prefetch" href="/assets/js/122.8cd7cd0c.js"><link rel="prefetch" href="/assets/js/123.f4f98520.js"><link rel="prefetch" href="/assets/js/124.4e233943.js"><link rel="prefetch" href="/assets/js/125.092aa1bf.js"><link rel="prefetch" href="/assets/js/126.b9c11778.js"><link rel="prefetch" href="/assets/js/127.e55d2fa9.js"><link rel="prefetch" href="/assets/js/128.3197df92.js"><link rel="prefetch" href="/assets/js/129.0244ee9b.js"><link rel="prefetch" href="/assets/js/130.e0648777.js"><link rel="prefetch" href="/assets/js/131.94e0b948.js"><link rel="prefetch" href="/assets/js/132.8520ded5.js"><link rel="prefetch" href="/assets/js/133.034f0365.js"><link rel="prefetch" href="/assets/js/134.1ca4a150.js"><link rel="prefetch" href="/assets/js/135.bdfc5c00.js"><link rel="prefetch" href="/assets/js/136.4918fec8.js"><link rel="prefetch" href="/assets/js/137.2db62de4.js"><link rel="prefetch" href="/assets/js/138.87fd076f.js"><link rel="prefetch" href="/assets/js/139.eecbbecd.js"><link rel="prefetch" href="/assets/js/14.2c349983.js"><link rel="prefetch" href="/assets/js/140.40d4aa29.js"><link rel="prefetch" href="/assets/js/141.dc280dee.js"><link rel="prefetch" href="/assets/js/142.4fa6a57c.js"><link rel="prefetch" href="/assets/js/143.33b90797.js"><link rel="prefetch" href="/assets/js/144.180e147f.js"><link rel="prefetch" href="/assets/js/145.832bf539.js"><link rel="prefetch" href="/assets/js/146.71cc0cd4.js"><link rel="prefetch" href="/assets/js/147.4d966ac1.js"><link rel="prefetch" href="/assets/js/148.98ccdf6a.js"><link rel="prefetch" href="/assets/js/149.c6e90dd0.js"><link rel="prefetch" href="/assets/js/15.5bb38388.js"><link rel="prefetch" href="/assets/js/150.cb70fd12.js"><link rel="prefetch" href="/assets/js/151.2da07e43.js"><link rel="prefetch" href="/assets/js/152.65bb34e9.js"><link rel="prefetch" href="/assets/js/153.10ef087b.js"><link rel="prefetch" href="/assets/js/154.2b0c9bc8.js"><link rel="prefetch" href="/assets/js/155.e38977ec.js"><link rel="prefetch" href="/assets/js/156.02b0bba1.js"><link rel="prefetch" href="/assets/js/157.3ed0f21f.js"><link rel="prefetch" href="/assets/js/158.beda5a17.js"><link rel="prefetch" href="/assets/js/159.5bfbc4d9.js"><link rel="prefetch" href="/assets/js/16.a58fed94.js"><link rel="prefetch" href="/assets/js/160.408dbb35.js"><link rel="prefetch" href="/assets/js/161.c4344be4.js"><link rel="prefetch" href="/assets/js/162.f80a95f8.js"><link rel="prefetch" href="/assets/js/163.dc12b090.js"><link rel="prefetch" href="/assets/js/164.682e2b57.js"><link rel="prefetch" href="/assets/js/165.0af68775.js"><link rel="prefetch" href="/assets/js/166.6254b754.js"><link rel="prefetch" href="/assets/js/167.727b0d47.js"><link rel="prefetch" href="/assets/js/168.e3458b70.js"><link rel="prefetch" href="/assets/js/169.d6492dcd.js"><link rel="prefetch" href="/assets/js/17.2429b1e6.js"><link rel="prefetch" href="/assets/js/170.3677af86.js"><link rel="prefetch" href="/assets/js/171.fe866179.js"><link rel="prefetch" href="/assets/js/172.c7d611be.js"><link rel="prefetch" href="/assets/js/173.e535d27d.js"><link rel="prefetch" href="/assets/js/174.07646070.js"><link rel="prefetch" href="/assets/js/175.227bcdd6.js"><link rel="prefetch" href="/assets/js/176.d03f1195.js"><link rel="prefetch" href="/assets/js/177.7206380a.js"><link rel="prefetch" href="/assets/js/178.7bfc35c4.js"><link rel="prefetch" href="/assets/js/179.d990d8ea.js"><link rel="prefetch" href="/assets/js/18.a5d750b4.js"><link rel="prefetch" href="/assets/js/180.2e4eba32.js"><link rel="prefetch" href="/assets/js/181.cbd8f5ca.js"><link rel="prefetch" href="/assets/js/182.afd4c94b.js"><link rel="prefetch" href="/assets/js/183.e7ab48ce.js"><link rel="prefetch" href="/assets/js/184.5f21d13c.js"><link rel="prefetch" href="/assets/js/185.4a4fd3b0.js"><link rel="prefetch" href="/assets/js/186.2ff2b9cd.js"><link rel="prefetch" href="/assets/js/187.b325350e.js"><link rel="prefetch" href="/assets/js/188.2a18fad9.js"><link rel="prefetch" href="/assets/js/189.425c0eb4.js"><link rel="prefetch" href="/assets/js/19.6925fadc.js"><link rel="prefetch" href="/assets/js/190.372a786b.js"><link rel="prefetch" href="/assets/js/191.a6b816f2.js"><link rel="prefetch" href="/assets/js/192.2d46ba6c.js"><link rel="prefetch" href="/assets/js/193.9d886ea4.js"><link rel="prefetch" href="/assets/js/194.ec75fc6b.js"><link rel="prefetch" href="/assets/js/195.5688915a.js"><link rel="prefetch" href="/assets/js/196.fa745ec4.js"><link rel="prefetch" href="/assets/js/197.b389a9e8.js"><link rel="prefetch" href="/assets/js/198.66ebbff6.js"><link rel="prefetch" href="/assets/js/199.32103f1f.js"><link rel="prefetch" href="/assets/js/20.d4b6b23a.js"><link rel="prefetch" href="/assets/js/200.1b917b48.js"><link rel="prefetch" href="/assets/js/201.626e8295.js"><link rel="prefetch" href="/assets/js/202.3df66e9e.js"><link rel="prefetch" href="/assets/js/203.aff1d912.js"><link rel="prefetch" href="/assets/js/204.6306a828.js"><link rel="prefetch" href="/assets/js/205.320db987.js"><link rel="prefetch" href="/assets/js/206.b4488e77.js"><link rel="prefetch" href="/assets/js/207.d5f17556.js"><link rel="prefetch" href="/assets/js/208.37210f86.js"><link rel="prefetch" href="/assets/js/209.786c7af4.js"><link rel="prefetch" href="/assets/js/21.95dcd0d6.js"><link rel="prefetch" href="/assets/js/210.38e58d19.js"><link rel="prefetch" href="/assets/js/211.09b699bb.js"><link rel="prefetch" href="/assets/js/212.ffd8d260.js"><link rel="prefetch" href="/assets/js/213.2891f4a0.js"><link rel="prefetch" href="/assets/js/214.8c1a47e0.js"><link rel="prefetch" href="/assets/js/215.c0dec61f.js"><link rel="prefetch" href="/assets/js/216.c71c59ab.js"><link rel="prefetch" href="/assets/js/217.8891c004.js"><link rel="prefetch" href="/assets/js/218.a2075ffe.js"><link rel="prefetch" href="/assets/js/219.1e70631e.js"><link rel="prefetch" href="/assets/js/22.473284b6.js"><link rel="prefetch" href="/assets/js/220.1d012692.js"><link rel="prefetch" href="/assets/js/221.aa4a0d37.js"><link rel="prefetch" href="/assets/js/222.b512a429.js"><link rel="prefetch" href="/assets/js/223.9e6d42f2.js"><link rel="prefetch" href="/assets/js/224.e46f8d1d.js"><link rel="prefetch" href="/assets/js/225.d8083ae3.js"><link rel="prefetch" href="/assets/js/226.7730bb6a.js"><link rel="prefetch" href="/assets/js/227.3ec46626.js"><link rel="prefetch" href="/assets/js/228.0be929cb.js"><link rel="prefetch" href="/assets/js/229.d8da48e4.js"><link rel="prefetch" href="/assets/js/23.1a1a291a.js"><link rel="prefetch" href="/assets/js/230.f6b2bd82.js"><link rel="prefetch" href="/assets/js/231.c43852a4.js"><link rel="prefetch" href="/assets/js/232.0aa9bd8a.js"><link rel="prefetch" href="/assets/js/233.28899baa.js"><link rel="prefetch" href="/assets/js/234.37a56cac.js"><link rel="prefetch" href="/assets/js/235.57d1f2f2.js"><link rel="prefetch" href="/assets/js/236.10c15500.js"><link rel="prefetch" href="/assets/js/237.8ccfba13.js"><link rel="prefetch" href="/assets/js/238.072cdb99.js"><link rel="prefetch" href="/assets/js/239.a4042ce8.js"><link rel="prefetch" href="/assets/js/24.6f32ee5c.js"><link rel="prefetch" href="/assets/js/240.a4e8f29e.js"><link rel="prefetch" href="/assets/js/241.aec0fdc6.js"><link rel="prefetch" href="/assets/js/242.4e5a95cc.js"><link rel="prefetch" href="/assets/js/243.0ab57bd0.js"><link rel="prefetch" href="/assets/js/244.d5257ed9.js"><link rel="prefetch" href="/assets/js/245.747b1f48.js"><link rel="prefetch" href="/assets/js/246.f89916b2.js"><link rel="prefetch" href="/assets/js/247.9baf4f72.js"><link rel="prefetch" href="/assets/js/248.5878bead.js"><link rel="prefetch" href="/assets/js/249.0153ed9a.js"><link rel="prefetch" href="/assets/js/25.825806eb.js"><link rel="prefetch" href="/assets/js/250.4f47bd06.js"><link rel="prefetch" href="/assets/js/251.2c55f0ac.js"><link rel="prefetch" href="/assets/js/252.3171358b.js"><link rel="prefetch" href="/assets/js/253.3d927b62.js"><link rel="prefetch" href="/assets/js/254.56caa785.js"><link rel="prefetch" href="/assets/js/255.b75a0344.js"><link rel="prefetch" href="/assets/js/256.e449fa3a.js"><link rel="prefetch" href="/assets/js/257.a280fd63.js"><link rel="prefetch" href="/assets/js/258.85cacce2.js"><link rel="prefetch" href="/assets/js/259.220782f3.js"><link rel="prefetch" href="/assets/js/26.c2a73fa1.js"><link rel="prefetch" href="/assets/js/260.4cad83bd.js"><link rel="prefetch" href="/assets/js/261.cc01772f.js"><link rel="prefetch" href="/assets/js/262.31fb9ce0.js"><link rel="prefetch" href="/assets/js/263.95d45d4a.js"><link rel="prefetch" href="/assets/js/264.a23581c9.js"><link rel="prefetch" href="/assets/js/265.f4d45025.js"><link rel="prefetch" href="/assets/js/266.08c29ff3.js"><link rel="prefetch" href="/assets/js/267.f25d5c52.js"><link rel="prefetch" href="/assets/js/268.e4b83b3f.js"><link rel="prefetch" href="/assets/js/269.54e6f5d2.js"><link rel="prefetch" href="/assets/js/27.94b60768.js"><link rel="prefetch" href="/assets/js/270.477bbf01.js"><link rel="prefetch" href="/assets/js/271.eadefaf2.js"><link rel="prefetch" href="/assets/js/272.c77f20a4.js"><link rel="prefetch" href="/assets/js/273.86e57213.js"><link rel="prefetch" href="/assets/js/274.caf08186.js"><link rel="prefetch" href="/assets/js/275.843af577.js"><link rel="prefetch" href="/assets/js/276.bc7dfde0.js"><link rel="prefetch" href="/assets/js/277.a18aa211.js"><link rel="prefetch" href="/assets/js/278.25260976.js"><link rel="prefetch" href="/assets/js/279.0bc329e7.js"><link rel="prefetch" href="/assets/js/28.166f967e.js"><link rel="prefetch" href="/assets/js/280.c7eb5b22.js"><link rel="prefetch" href="/assets/js/281.78d4ed73.js"><link rel="prefetch" href="/assets/js/282.08dbc1ff.js"><link rel="prefetch" href="/assets/js/283.1a8ed58d.js"><link rel="prefetch" href="/assets/js/284.c67e1e75.js"><link rel="prefetch" href="/assets/js/285.6252305a.js"><link rel="prefetch" href="/assets/js/286.5c98afe5.js"><link rel="prefetch" href="/assets/js/287.bd42634c.js"><link rel="prefetch" href="/assets/js/288.1a692f6d.js"><link rel="prefetch" href="/assets/js/289.137dd607.js"><link rel="prefetch" href="/assets/js/29.69647249.js"><link rel="prefetch" href="/assets/js/290.6cb00ec4.js"><link rel="prefetch" href="/assets/js/291.4a6210f6.js"><link rel="prefetch" href="/assets/js/292.dedb1bb4.js"><link rel="prefetch" href="/assets/js/293.6e25fb34.js"><link rel="prefetch" href="/assets/js/294.c7f2e4eb.js"><link rel="prefetch" href="/assets/js/295.76fdbc3b.js"><link rel="prefetch" href="/assets/js/296.48999983.js"><link rel="prefetch" href="/assets/js/297.8d1c640d.js"><link rel="prefetch" href="/assets/js/298.9f5441b7.js"><link rel="prefetch" href="/assets/js/299.150b9208.js"><link rel="prefetch" href="/assets/js/3.461c0085.js"><link rel="prefetch" href="/assets/js/30.defdcb36.js"><link rel="prefetch" href="/assets/js/300.6b9057e3.js"><link rel="prefetch" href="/assets/js/301.74c659b3.js"><link rel="prefetch" href="/assets/js/302.6d8ebf64.js"><link rel="prefetch" href="/assets/js/303.21fe2025.js"><link rel="prefetch" href="/assets/js/304.3c05c7a6.js"><link rel="prefetch" href="/assets/js/305.7c3fb5eb.js"><link rel="prefetch" href="/assets/js/306.c1fa105b.js"><link rel="prefetch" href="/assets/js/307.48a1d678.js"><link rel="prefetch" href="/assets/js/308.4e58779a.js"><link rel="prefetch" href="/assets/js/309.9fac2cdc.js"><link rel="prefetch" href="/assets/js/31.77a45ce0.js"><link rel="prefetch" href="/assets/js/310.3a159c1e.js"><link rel="prefetch" href="/assets/js/311.603f45af.js"><link rel="prefetch" href="/assets/js/312.603c7885.js"><link rel="prefetch" href="/assets/js/313.69be703f.js"><link rel="prefetch" href="/assets/js/314.9054c9ab.js"><link rel="prefetch" href="/assets/js/315.e331ef4b.js"><link rel="prefetch" href="/assets/js/316.1d0a506f.js"><link rel="prefetch" href="/assets/js/317.1b787b88.js"><link rel="prefetch" href="/assets/js/318.86f787b0.js"><link rel="prefetch" href="/assets/js/319.a6921190.js"><link rel="prefetch" href="/assets/js/32.93f3bdf1.js"><link rel="prefetch" href="/assets/js/320.f0c26c43.js"><link rel="prefetch" href="/assets/js/321.a19c9ff4.js"><link rel="prefetch" href="/assets/js/322.01ba6221.js"><link rel="prefetch" href="/assets/js/323.978cd49f.js"><link rel="prefetch" href="/assets/js/324.fe310b5d.js"><link rel="prefetch" href="/assets/js/325.3244bcda.js"><link rel="prefetch" href="/assets/js/326.5c4f01a3.js"><link rel="prefetch" href="/assets/js/327.5db6522f.js"><link rel="prefetch" href="/assets/js/328.e220334a.js"><link rel="prefetch" href="/assets/js/329.df7c545b.js"><link rel="prefetch" href="/assets/js/33.f4982416.js"><link rel="prefetch" href="/assets/js/330.3f9cc52f.js"><link rel="prefetch" href="/assets/js/331.1661ec63.js"><link rel="prefetch" href="/assets/js/332.bdec065c.js"><link rel="prefetch" href="/assets/js/333.b663aa77.js"><link rel="prefetch" href="/assets/js/334.b1f6193f.js"><link rel="prefetch" href="/assets/js/335.cc7fedb2.js"><link rel="prefetch" href="/assets/js/336.35aa2903.js"><link rel="prefetch" href="/assets/js/337.a91aa873.js"><link rel="prefetch" href="/assets/js/338.ae795233.js"><link rel="prefetch" href="/assets/js/339.4582441a.js"><link rel="prefetch" href="/assets/js/34.deb0c8cd.js"><link rel="prefetch" href="/assets/js/340.c9e30c24.js"><link rel="prefetch" href="/assets/js/341.ab8bbf2f.js"><link rel="prefetch" href="/assets/js/342.4dcd40fe.js"><link rel="prefetch" href="/assets/js/343.04aa7b0e.js"><link rel="prefetch" href="/assets/js/344.cf12e221.js"><link rel="prefetch" href="/assets/js/345.851fea37.js"><link rel="prefetch" href="/assets/js/346.cd04ce92.js"><link rel="prefetch" href="/assets/js/347.cc13c5f8.js"><link rel="prefetch" href="/assets/js/348.e8149a34.js"><link rel="prefetch" href="/assets/js/349.8c615125.js"><link rel="prefetch" href="/assets/js/35.946b2b10.js"><link rel="prefetch" href="/assets/js/350.297c9452.js"><link rel="prefetch" href="/assets/js/351.c625eafe.js"><link rel="prefetch" href="/assets/js/352.21fc6d9a.js"><link rel="prefetch" href="/assets/js/353.0918e6c0.js"><link rel="prefetch" href="/assets/js/354.760beca2.js"><link rel="prefetch" href="/assets/js/355.ec756b28.js"><link rel="prefetch" href="/assets/js/356.c41182ab.js"><link rel="prefetch" href="/assets/js/357.3a762703.js"><link rel="prefetch" href="/assets/js/358.2c575e4a.js"><link rel="prefetch" href="/assets/js/359.7ce42976.js"><link rel="prefetch" href="/assets/js/36.22805e5a.js"><link rel="prefetch" href="/assets/js/360.ef9a8667.js"><link rel="prefetch" href="/assets/js/361.1511e3f4.js"><link rel="prefetch" href="/assets/js/362.d5fbab7c.js"><link rel="prefetch" href="/assets/js/363.976be7aa.js"><link rel="prefetch" href="/assets/js/364.1843f42a.js"><link rel="prefetch" href="/assets/js/365.dfde987d.js"><link rel="prefetch" href="/assets/js/366.b87a9cb5.js"><link rel="prefetch" href="/assets/js/367.8ba1f57c.js"><link rel="prefetch" href="/assets/js/368.8b96559b.js"><link rel="prefetch" href="/assets/js/369.2546100c.js"><link rel="prefetch" href="/assets/js/37.3525192b.js"><link rel="prefetch" href="/assets/js/370.4db8b482.js"><link rel="prefetch" href="/assets/js/371.0542b71b.js"><link rel="prefetch" href="/assets/js/372.4c9bde18.js"><link rel="prefetch" href="/assets/js/373.32bcd884.js"><link rel="prefetch" href="/assets/js/374.3793da0b.js"><link rel="prefetch" href="/assets/js/375.8297ec5b.js"><link rel="prefetch" href="/assets/js/376.e346176b.js"><link rel="prefetch" href="/assets/js/377.ac5d8c7f.js"><link rel="prefetch" href="/assets/js/378.e0b84ffc.js"><link rel="prefetch" href="/assets/js/379.663b7fb2.js"><link rel="prefetch" href="/assets/js/38.72fc1973.js"><link rel="prefetch" href="/assets/js/380.01abbbeb.js"><link rel="prefetch" href="/assets/js/381.445e4202.js"><link rel="prefetch" href="/assets/js/383.c8303f29.js"><link rel="prefetch" href="/assets/js/384.67496581.js"><link rel="prefetch" href="/assets/js/385.e206fb4d.js"><link rel="prefetch" href="/assets/js/386.1e324581.js"><link rel="prefetch" href="/assets/js/387.4b3c734b.js"><link rel="prefetch" href="/assets/js/388.89e3ad82.js"><link rel="prefetch" href="/assets/js/389.814cbc20.js"><link rel="prefetch" href="/assets/js/39.85d65742.js"><link rel="prefetch" href="/assets/js/390.3d2bc4b1.js"><link rel="prefetch" href="/assets/js/391.ad15e5c9.js"><link rel="prefetch" href="/assets/js/392.22ea3d28.js"><link rel="prefetch" href="/assets/js/393.dc925e8e.js"><link rel="prefetch" href="/assets/js/394.f758a517.js"><link rel="prefetch" href="/assets/js/395.bb8c0d77.js"><link rel="prefetch" href="/assets/js/396.8cc3e6cb.js"><link rel="prefetch" href="/assets/js/397.44dba438.js"><link rel="prefetch" href="/assets/js/398.76ebedbb.js"><link rel="prefetch" href="/assets/js/399.a6acb507.js"><link rel="prefetch" href="/assets/js/40.2ef6e1f7.js"><link rel="prefetch" href="/assets/js/400.a6d9d98e.js"><link rel="prefetch" href="/assets/js/401.0715bf66.js"><link rel="prefetch" href="/assets/js/402.fff59a65.js"><link rel="prefetch" href="/assets/js/403.9f58e94a.js"><link rel="prefetch" href="/assets/js/404.4817775f.js"><link rel="prefetch" href="/assets/js/405.1744cc09.js"><link rel="prefetch" href="/assets/js/406.a978bd4c.js"><link rel="prefetch" href="/assets/js/407.4fb1ac88.js"><link rel="prefetch" href="/assets/js/408.f1bb0f31.js"><link rel="prefetch" href="/assets/js/409.942c7d40.js"><link rel="prefetch" href="/assets/js/41.a4f19bba.js"><link rel="prefetch" href="/assets/js/410.66f0918b.js"><link rel="prefetch" href="/assets/js/411.6a5436f5.js"><link rel="prefetch" href="/assets/js/412.ec974a04.js"><link rel="prefetch" href="/assets/js/413.ba4fd119.js"><link rel="prefetch" href="/assets/js/414.55e59bef.js"><link rel="prefetch" href="/assets/js/415.412201ca.js"><link rel="prefetch" href="/assets/js/416.4b4ba217.js"><link rel="prefetch" href="/assets/js/417.a65d2f1b.js"><link rel="prefetch" href="/assets/js/418.bf142c63.js"><link rel="prefetch" href="/assets/js/419.65b0f04d.js"><link rel="prefetch" href="/assets/js/42.7f2b0b0f.js"><link rel="prefetch" href="/assets/js/420.ab0f7606.js"><link rel="prefetch" href="/assets/js/421.d9d2dc13.js"><link rel="prefetch" href="/assets/js/422.093a8290.js"><link rel="prefetch" href="/assets/js/423.041fc7be.js"><link rel="prefetch" href="/assets/js/424.410b1a8f.js"><link rel="prefetch" href="/assets/js/425.661237bb.js"><link rel="prefetch" href="/assets/js/426.c01ca04f.js"><link rel="prefetch" href="/assets/js/427.af6802e0.js"><link rel="prefetch" href="/assets/js/428.e255a9c4.js"><link rel="prefetch" href="/assets/js/429.3f62c79c.js"><link rel="prefetch" href="/assets/js/43.96eb08e4.js"><link rel="prefetch" href="/assets/js/430.86f8cd5f.js"><link rel="prefetch" href="/assets/js/431.89f717cb.js"><link rel="prefetch" href="/assets/js/432.606f5381.js"><link rel="prefetch" href="/assets/js/433.e2a7c92d.js"><link rel="prefetch" href="/assets/js/434.375d2ee0.js"><link rel="prefetch" href="/assets/js/435.10ac30b9.js"><link rel="prefetch" href="/assets/js/436.dfadd161.js"><link rel="prefetch" href="/assets/js/437.f92a1705.js"><link rel="prefetch" href="/assets/js/438.a924c254.js"><link rel="prefetch" href="/assets/js/439.6a8f7f89.js"><link rel="prefetch" href="/assets/js/44.af0f503b.js"><link rel="prefetch" href="/assets/js/440.6f41f087.js"><link rel="prefetch" href="/assets/js/441.296b6711.js"><link rel="prefetch" href="/assets/js/442.e82e2313.js"><link rel="prefetch" href="/assets/js/443.c46b8b7c.js"><link rel="prefetch" href="/assets/js/444.850b3f10.js"><link rel="prefetch" href="/assets/js/445.70fafa08.js"><link rel="prefetch" href="/assets/js/446.c2fd23e4.js"><link rel="prefetch" href="/assets/js/447.fac66885.js"><link rel="prefetch" href="/assets/js/448.5c8074d5.js"><link rel="prefetch" href="/assets/js/449.25db27ca.js"><link rel="prefetch" href="/assets/js/45.19ecb85c.js"><link rel="prefetch" href="/assets/js/450.8bc58614.js"><link rel="prefetch" href="/assets/js/451.69e35a33.js"><link rel="prefetch" href="/assets/js/452.a129daf9.js"><link rel="prefetch" href="/assets/js/453.4f696672.js"><link rel="prefetch" href="/assets/js/454.e2a1b328.js"><link rel="prefetch" href="/assets/js/455.b7037708.js"><link rel="prefetch" href="/assets/js/456.eda2adc0.js"><link rel="prefetch" href="/assets/js/457.5f0d7722.js"><link rel="prefetch" href="/assets/js/458.effcb970.js"><link rel="prefetch" href="/assets/js/459.48baddfb.js"><link rel="prefetch" href="/assets/js/46.88cbca22.js"><link rel="prefetch" href="/assets/js/460.c50fe2c5.js"><link rel="prefetch" href="/assets/js/461.55293f7a.js"><link rel="prefetch" href="/assets/js/462.682315f0.js"><link rel="prefetch" href="/assets/js/463.f4278aae.js"><link rel="prefetch" href="/assets/js/464.f140b938.js"><link rel="prefetch" href="/assets/js/465.392a08f4.js"><link rel="prefetch" href="/assets/js/466.90a32c46.js"><link rel="prefetch" href="/assets/js/467.d795bc61.js"><link rel="prefetch" href="/assets/js/468.6e663011.js"><link rel="prefetch" href="/assets/js/469.b7bffde5.js"><link rel="prefetch" href="/assets/js/47.7e31de19.js"><link rel="prefetch" href="/assets/js/470.388beea3.js"><link rel="prefetch" href="/assets/js/471.6ca5dbe5.js"><link rel="prefetch" href="/assets/js/472.9bc4c0a6.js"><link rel="prefetch" href="/assets/js/473.fd427e29.js"><link rel="prefetch" href="/assets/js/474.862fc10a.js"><link rel="prefetch" href="/assets/js/475.6e3893de.js"><link rel="prefetch" href="/assets/js/476.0f32dc93.js"><link rel="prefetch" href="/assets/js/477.8cb145a5.js"><link rel="prefetch" href="/assets/js/478.65a09f13.js"><link rel="prefetch" href="/assets/js/479.bee3f754.js"><link rel="prefetch" href="/assets/js/48.ca956f8d.js"><link rel="prefetch" href="/assets/js/480.f59f88af.js"><link rel="prefetch" href="/assets/js/481.8c5e02e6.js"><link rel="prefetch" href="/assets/js/482.7988ca13.js"><link rel="prefetch" href="/assets/js/483.6d1e171c.js"><link rel="prefetch" href="/assets/js/484.b3f3a54b.js"><link rel="prefetch" href="/assets/js/485.e97a72d8.js"><link rel="prefetch" href="/assets/js/49.4cf4b45c.js"><link rel="prefetch" href="/assets/js/50.9fdb4f1e.js"><link rel="prefetch" href="/assets/js/51.88f75159.js"><link rel="prefetch" href="/assets/js/52.1c372af0.js"><link rel="prefetch" href="/assets/js/53.e0e13d9a.js"><link rel="prefetch" href="/assets/js/54.231f6505.js"><link rel="prefetch" href="/assets/js/55.52b04941.js"><link rel="prefetch" href="/assets/js/56.91345e86.js"><link rel="prefetch" href="/assets/js/57.201a710e.js"><link rel="prefetch" href="/assets/js/58.6fb2ccb6.js"><link rel="prefetch" href="/assets/js/59.cb26cb6a.js"><link rel="prefetch" href="/assets/js/60.a5fc202b.js"><link rel="prefetch" href="/assets/js/61.0facb3f9.js"><link rel="prefetch" href="/assets/js/62.d00be571.js"><link rel="prefetch" href="/assets/js/63.d66d194b.js"><link rel="prefetch" href="/assets/js/64.4b34837d.js"><link rel="prefetch" href="/assets/js/65.c5eca227.js"><link rel="prefetch" href="/assets/js/66.f3bb4baa.js"><link rel="prefetch" href="/assets/js/67.4fbce724.js"><link rel="prefetch" href="/assets/js/68.39780014.js"><link rel="prefetch" href="/assets/js/69.523952df.js"><link rel="prefetch" href="/assets/js/7.d893eec0.js"><link rel="prefetch" href="/assets/js/70.33f89cfa.js"><link rel="prefetch" href="/assets/js/71.6b329e8e.js"><link rel="prefetch" href="/assets/js/72.90caac3a.js"><link rel="prefetch" href="/assets/js/73.2b7012a1.js"><link rel="prefetch" href="/assets/js/74.0076f1ec.js"><link rel="prefetch" href="/assets/js/75.1cbaf5cf.js"><link rel="prefetch" href="/assets/js/76.2461a9e9.js"><link rel="prefetch" href="/assets/js/77.be9e1732.js"><link rel="prefetch" href="/assets/js/78.a4825263.js"><link rel="prefetch" href="/assets/js/79.95c5e105.js"><link rel="prefetch" href="/assets/js/8.acf971e3.js"><link rel="prefetch" href="/assets/js/80.1a7c44e2.js"><link rel="prefetch" href="/assets/js/81.38ee2ba4.js"><link rel="prefetch" href="/assets/js/82.78220668.js"><link rel="prefetch" href="/assets/js/83.3dfead3b.js"><link rel="prefetch" href="/assets/js/84.7f1f743d.js"><link rel="prefetch" href="/assets/js/85.ab59a697.js"><link rel="prefetch" href="/assets/js/86.1888a97f.js"><link rel="prefetch" href="/assets/js/87.149a705f.js"><link rel="prefetch" href="/assets/js/88.8a53e92d.js"><link rel="prefetch" href="/assets/js/89.a68dd87b.js"><link rel="prefetch" href="/assets/js/9.c38b654d.js"><link rel="prefetch" href="/assets/js/90.c70af23c.js"><link rel="prefetch" href="/assets/js/91.58de9211.js"><link rel="prefetch" href="/assets/js/92.697a7ada.js"><link rel="prefetch" href="/assets/js/93.2a27830a.js"><link rel="prefetch" href="/assets/js/94.20be84f6.js"><link rel="prefetch" href="/assets/js/95.bc2120e0.js"><link rel="prefetch" href="/assets/js/96.5b3aa395.js"><link rel="prefetch" href="/assets/js/97.c4a15008.js"><link rel="prefetch" href="/assets/js/98.3e47fdce.js"><link rel="prefetch" href="/assets/js/99.4b101d54.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b8eeafc3.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Cactusli blog" class="logo"> <span class="site-name can-hide">Cactusli blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/Java/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java Study</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/Java/" class="nav-link">Java 基础</a></li><li class="dropdown-subitem"><a href="/note/design-pattern/" class="nav-link">Java 版设计模式</a></li></ul></li><li class="dropdown-item"><h4>阅读源码系列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/32e50d/" class="nav-link">Spring Boot</a></li><li class="dropdown-subitem"><a href="/pages/d065c4/" class="nav-link">Netty</a></li><li class="dropdown-subitem"><a href="/pages/4d3c7f/" class="nav-link">Dubbo</a></li><li class="dropdown-subitem"><a href="/pages/920e2b/" class="nav-link">搭建rpc框架</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/SpringBoot/" class="nav-link">《SpringBoot教程》</a></li><li class="dropdown-subitem"><a href="/note/Docker/" class="nav-link">《Docker教程》</a></li><li class="dropdown-subitem"><a href="/note/Kubernetes/" class="nav-link">《Kubernetes教程》</a></li><li class="dropdown-subitem"><a href="/note/SpringCloud-febs/" class="nav-link">《SpringCloud微服务权限系统搭建》</a></li><li class="dropdown-subitem"><a href="/note/Netty/" class="nav-link">《Netty教程》</a></li><li class="dropdown-subitem"><a href="/note/Gateway/" class="nav-link">《API网关设计与实践》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手册" class="dropdown-title"><a href="/manual/" class="link-title">手册</a> <span class="title" style="display:none;">手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d2639c/" class="nav-link">环境配置</a></li><li class="dropdown-item"><!----> <a href="/pages/39e2a1/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">手册记录</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://firework.cloudflaress.eu.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  看烟花
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/706328/" class="nav-link">英语学习</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/lixuanfengs/cactus-vuepress-sc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.statically.io/gh/lixuanfengs/blog-images/master/cactus-blogs/avatar3.gif"> <div class="blogger-info"><h3>Xuan Feng Li</h3> <span>学习老黄牛精神！</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/Java/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java Study</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/Java/" class="nav-link">Java 基础</a></li><li class="dropdown-subitem"><a href="/note/design-pattern/" class="nav-link">Java 版设计模式</a></li></ul></li><li class="dropdown-item"><h4>阅读源码系列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/32e50d/" class="nav-link">Spring Boot</a></li><li class="dropdown-subitem"><a href="/pages/d065c4/" class="nav-link">Netty</a></li><li class="dropdown-subitem"><a href="/pages/4d3c7f/" class="nav-link">Dubbo</a></li><li class="dropdown-subitem"><a href="/pages/920e2b/" class="nav-link">搭建rpc框架</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/SpringBoot/" class="nav-link">《SpringBoot教程》</a></li><li class="dropdown-subitem"><a href="/note/Docker/" class="nav-link">《Docker教程》</a></li><li class="dropdown-subitem"><a href="/note/Kubernetes/" class="nav-link">《Kubernetes教程》</a></li><li class="dropdown-subitem"><a href="/note/SpringCloud-febs/" class="nav-link">《SpringCloud微服务权限系统搭建》</a></li><li class="dropdown-subitem"><a href="/note/Netty/" class="nav-link">《Netty教程》</a></li><li class="dropdown-subitem"><a href="/note/Gateway/" class="nav-link">《API网关设计与实践》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手册" class="dropdown-title"><a href="/manual/" class="link-title">手册</a> <span class="title" style="display:none;">手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d2639c/" class="nav-link">环境配置</a></li><li class="dropdown-item"><!----> <a href="/pages/39e2a1/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">手册记录</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://firework.cloudflaress.eu.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  看烟花
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/706328/" class="nav-link">英语学习</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/lixuanfengs/cactus-vuepress-sc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础框架搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>架构完善</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>完善登录流程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>整合Swagger</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>整合第三方服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端系统介绍</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>K8S集群部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>分布式事务</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c701fe/" class="sidebar-link">分布式架构事务挑战🧡</a></li><li><a href="/pages/020840/" class="sidebar-link">分布式事务解决方案🥑</a></li><li><a href="/pages/f8eaa1/" class="sidebar-link">基于消息中间件RocketMQ方案（一）🥒</a></li><li><a href="/pages/a7a1b7/" class="sidebar-link">4 基于消息中间件RocketMQ方案（二）🍌</a></li><li><a href="/pages/8c9029/" class="sidebar-link">基于TX-LCN方案🌍</a></li><li><a href="/pages/330793/" aria-current="page" class="active sidebar-link">基于阿里Seata方案🌱</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/330793/#搭建seata-server" class="sidebar-link">搭建Seata Server</a></li><li class="sidebar-sub-header level2"><a href="/pages/330793/#微服务整合seata" class="sidebar-link">微服务整合Seata</a></li><li class="sidebar-sub-header level2"><a href="/pages/330793/#at模式分布式事务控制" class="sidebar-link">AT模式分布式事务控制</a></li><li class="sidebar-sub-header level2"><a href="/pages/330793/#tcc模式分布式事务控制" class="sidebar-link">TCC模式分布式事务控制</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/note/SpringCloud-febs/#《SpringCloud微服务权限系统搭建》笔记" data-v-06225672>《SpringCloud微服务权限系统搭建》笔记</a></li><li data-v-06225672><a href="/note/SpringCloud-febs/#分布式事务" data-v-06225672>分布式事务</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/lixuanfengs" target="_blank" title="作者" class="beLink" data-v-06225672>cactusli</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-05-10</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->基于阿里Seata方案🌱<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="搭建seata-server"><a href="#搭建seata-server" class="header-anchor">#</a> 搭建Seata Server</h2> <p><a href="http://seata.io/" target="_blank" rel="noopener noreferrer">Seata<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一款开源的分布式事务解决方案，致力于提供高性能和简单易用的分布式事务服务。Seata 将为用户提供了 AT、TCC、SAGA（适合业务流程长、业务流程多的情况，所以本节不演示） 和 XA（截至2020年1月1日，该功能Seata还在开发中，所以也不演示） 事务模式，为用户打造一站式的分布式解决方案。</p> <p>Seata服务端下载地址：https://github.com/seata/seata/releases。因为项目里使用的spring-cloud-alibaba-dependencies依赖版本为2.1.1.RELEASE，内部Seata的版本为0.9.0，所以我们下载这个版本的Seata服务端：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l85ZTS.png" alt="698.png"></p> <p>下载后解压：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l85MSs.png" alt="699.png"></p> <p>修改conf目录下的file.conf配置文件，修改部分如下图所示：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8I58J.png" alt="700.png"></p> <p><img src="https://s2.ax1x.com/2020/01/01/l8IHDx.png" alt="701.png"></p> <p>主要修改了事务分组名称和数据库连接。</p> <p>接着在创建一个名为febs_cloud_seata的MySQL数据库，并且导入Seata解压目录conf文件夹下的db_store.sql脚本：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8X4P0.png" alt="702.png"></p> <p>在febs_cloud_base数据库中导入Seata解压目录conf文件夹下的db_undo_log.sql脚本：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8XbqJ.png" alt="705.png"></p> <p>导入后，接着修改conf目录下的registry.conf配置文件，修改部分如下图所示：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8Tf1J.png" alt="703.png"></p> <p>指定使用Nacos作为注册中心，并修改了Nacos地址。</p> <p>这些都修改好后，双击解压目录bin文件夹下的seata-server.bat文件启动seata-server即可（别忘了先启动好Nacos）。</p> <h2 id="微服务整合seata"><a href="#微服务整合seata" class="header-anchor">#</a> 微服务整合Seata</h2> <p>本节将在10.3节的源码（注意，是10.3节而不是10.4节，因为10.4节已经添加了RocketMQ相关代码）上继续编写代码。使用IDEA导入10.3节的源码（导入源码后，清空下febs_cloud_base和febs_nacos库表，重新执行febs-cloud目录下的febs_cloud_base.sql和febs_nacos.sql数据库脚本），然后在febs-server的pom中添加Seata依赖：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-alibaba-seata&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>此外，目前MyBatis Plus的多数据源配置并不适用于Seata，因为Seata需要我们手写数据源代理配置（使用Druid作为驱动），所以我们删掉febs-server pom中MyBatis Plus的多数据源依赖（别担心，本节的数据源代理配置还是基于多数据源的）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!-- 删掉 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
    &lt;artifactId&gt;dynamic-datasource-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.5.7&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>接下来，我们开始往febs-server-test和febs-server-system中整合Seata，<strong>因为步骤一致，所以这里以febs-server-sysetm为例子，febs-server-test照着改就行了</strong>。</p> <p>修改Nacos控制台中的febs-server-system.yaml配置，删掉spring.datasource下的所有配置，替换为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  datasource:
    base:
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://${mysql.url}:3306/febs_cloud_base?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2b8
      username: root
      password: 123456
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这里指定了一个别名为base的数据配置，如果你还需要添加新的数据源配置，则只需和base配置保持同级即可，比如新增加一个别名为order的数据源：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  datasource:
    base:
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://${mysql.url}:3306/febs_cloud_base?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2b8
      username: root
      password: 123456
    order:
      driver-class-name: xx
      url: xx
      username: xx
      password: xx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>修改后，febs-sever-system.yaml的完整配置如下所示：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>server:
  port: 8201

spring:
  boot:
    admin:
      client:
        url: http://${febs-monitor-admin}:8401
        username: febs
        password: 123456
  datasource:
    base:
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://${mysql.url}:3306/febs_cloud_base?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2b8
      username: root
      password: 123456
      
  autoconfigure:
    exclude: org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration

security:
  oauth2:
    resource:
      id: ${spring.application.name}
      user-info-uri: http://${febs-gateway}:8301/auth/user

mybatis-plus:
  type-aliases-package: cc.mrbird.febs.common.entity.system
  mapper-locations: classpath:mapper/*/*.xml
  configuration:
    jdbc-type-for-null: null
  global-config:
    banner: false

info:
  app:
    name: ${spring.application.name}
    description: &quot;@project.description@&quot;
    version: &quot;@project.version@&quot;

management:
  endpoints:
    web:
      exposure:
        include: '*'
  endpoint:
    health:
      show-details: ALWAYS
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>接着回到febs-server-system项目，在配置文件bootstrap.yml中添加Seata配置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  cloud:
    alibaba:
      seata:
        tx-service-group: febs_tx_group
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这个分组名称必须和Seata解压目录conf文件夹下file.conf中指定的一致。</p> <p>然后将Seata解压目录conf文件夹下的file.conf和registry.conf文件拷贝到febs-server-system的resources目录下：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8qaEq.png" alt="704.png"></p> <p>接着在febs-server-system的cc.mrbird.febs.server.system.configure目录下新建seata包，然后在该包下新建枚举类DataSourceKey，用于指定数据库别名：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Getter
public enum DataSourceKey {
    // 代表刚刚在febs-server-system.yaml中配置的base数据库
    BASE
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>接着在该目录下创建DynamicDataSourceContextHolder，用于切换数据库上下文：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class DynamicDataSourceContextHolder {

    // 默认数据源BASE
    private static final ThreadLocal&lt;String&gt; CONTEXT_HOLDER = ThreadLocal.withInitial(DataSourceKey.BASE::name);

    private static List&lt;Object&gt; dataSourceKeys = new ArrayList&lt;&gt;();

    public static void setDataSourceKey(DataSourceKey key) {
        CONTEXT_HOLDER.set(key.name());
    }

    public static String getDataSourceKey() {
        return CONTEXT_HOLDER.get();
    }

    public static void clearDataSourceKey() {
        CONTEXT_HOLDER.remove();
    }

    public static List&lt;Object&gt; getDataSourceKeys() {
        return dataSourceKeys;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>这里指定了默认的数据源为BASE，如果要切换到别的数据源，只需要通过<code>setDataSourceKey</code>方法设定即可。</p> <p>在该目录下创建动态数据源路由DynamicRoutingDataSource：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
public class DynamicRoutingDataSource extends AbstractRoutingDataSource {

    @Override
    protected Object determineCurrentLookupKey() {
        log.info(&quot;当前数据源 [{}]&quot;, DynamicDataSourceContextHolder.getDataSourceKey());
        return DynamicDataSourceContextHolder.getDataSourceKey();
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>最后创建一个Seata数据源代理类DataSourceProxyConfig：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/**
 * 虽说是多数据源，但这里只有一个BASE数据源，如果要添加新的数据源，照猫画虎即可。
 * @author MrBird
 */
@Configuration
public class DataSourceProxyConfig {

    @Bean(&quot;originBase&quot;)
    @ConfigurationProperties(prefix = &quot;spring.datasource.base&quot;)
    public DataSource dataSourceMaster() {
        return new DruidDataSource();
    }


    @Bean(name = &quot;base&quot;)
    public DataSourceProxy masterDataSourceProxy(@Qualifier(&quot;originBase&quot;) DataSource dataSource) {
        return new DataSourceProxy(dataSource);
    }


    @Bean(&quot;dynamicDataSource&quot;)
    public DataSource dynamicDataSource(@Qualifier(&quot;base&quot;) DataSource dataSourceBase) {

        DynamicRoutingDataSource dynamicRoutingDataSource = new DynamicRoutingDataSource();

        Map&lt;Object, Object&gt; dataSourceMap = new HashMap&lt;&gt;(1);
        dataSourceMap.put(DataSourceKey.BASE.name(), dataSourceBase);

        dynamicRoutingDataSource.setDefaultTargetDataSource(dataSourceBase);
        dynamicRoutingDataSource.setTargetDataSources(dataSourceMap);

        DynamicDataSourceContextHolder.getDataSourceKeys().addAll(dataSourceMap.keySet());

        return dynamicRoutingDataSource;
    }

    @Bean
    @ConfigurationProperties(prefix = &quot;mybatis&quot;)
    public MybatisSqlSessionFactoryBean sqlSessionFactoryBean(@Qualifier(&quot;dynamicDataSource&quot;) DataSource dataSource) {
        // 这里用 MybatisSqlSessionFactoryBean 代替了 SqlSessionFactoryBean，否则 MyBatisPlus 不会生效
        MybatisSqlSessionFactoryBean mybatisSqlSessionFactoryBean = new MybatisSqlSessionFactoryBean();
        mybatisSqlSessionFactoryBean.setDataSource(dataSource);
        return mybatisSqlSessionFactoryBean;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>至此febs-server-system已经整合好Seata了，剩下的febs-server-test照着这些步骤改即可。</p> <h2 id="at模式分布式事务控制"><a href="#at模式分布式事务控制" class="header-anchor">#</a> AT模式分布式事务控制</h2> <p>这里我们依旧采用购物的例子，在febs_cloud_base数据库中新建购物日志表t_trade_log：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE TABLE `t_trade_log`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `goods_id` int(11) NOT NULL COMMENT '商品ID',
  `goods_name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商品名称',
  `status` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '状态',
  `create_time` datetime(0) NOT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

SET FOREIGN_KEY_CHECKS = 1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在febs-common的cc.mrbird.febs.common.entity.system包下新建TradeLog实体类：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Data
@TableName(&quot;t_trade_log&quot;)
public class TradeLog implements Serializable {

    private static final long serialVersionUID = 3902838426348137002L;

    @TableId(value = &quot;ID&quot;, type = IdType.AUTO)
    private Long id;

    @TableField(&quot;GOODS_ID&quot;)
    private String goodsId;
    @TableField(&quot;GOODS_NAME&quot;)
    private String goodsName;
    @TableField(&quot;STATUS&quot;)
    private String status;
    @TableField(&quot;CREATE_TIME&quot;)
    private Date createTime;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>接着在febs-server-test的cc.mrbird.febs.server.test.mapper和febs-server-system的cc.mrbird.febs.server.system.mapper包下新建TradeLogMapper接口：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public interface TradeLogMapper extends BaseMapper&lt;TradeLog&gt; {
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在febs-server-system的cc.mrbird.febs.server.system.service下新建ITradeLogService接口：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public interface ITradeLogService extends IService&lt;TradeLog&gt; {
    void orderAndPay(TradeLog tradeLog);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>接口包含一个下单支付抽象方法。</p> <p>在该目录下的impl包下新建该接口实现类TradeLogServiceImpl：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@Service(&quot;tradeLogService&quot;)
public class TradeLogServiceImpl extends ServiceImpl&lt;TradeLogMapper, TradeLog&gt; implements ITradeLogService {

    @Override
    @GlobalTransactional
    public void orderAndPay(TradeLog tradeLog) {
       // DynamicDataSourceContextHolder.setDataSourceKey(DataSourceKey.BASE);
        log.info(&quot;当前 XID: {}&quot;, RootContext.getXID());

        tradeLog.setCreateTime(new Date());
        tradeLog.setStatus(&quot;下单并支付成功&quot;);

        // 保存支付日志
        this.save(tradeLog);
        log.info(&quot;用户已经下单并支付成功商品ID为{}，名称为{}的商品&quot;, tradeLog.getGoodsId(), tradeLog.getGoodsName());
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>orderAndPay</code>方法上使用Seata的<code>@GlobalTransactional</code>注解标注，表示开启分布式事务控制。</p> <p>接着在febs-server-system的cc.mrbird.febs.server.system.controller包下的TestController类下新增如下方法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@RestController
public class TestController {

    @Autowired
    private ITradeLogService tradeLogService;

   ...

    @GetMapping(&quot;pay&quot;)
    public void orderAndPay(TradeLog tradeLog) {
        this.tradeLogService.orderAndPay(tradeLog);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>简单起见，我没有对TradeLog进行格式校验。</p> <p>在febs-server-test的cc.mrbird.febs.server.test.service目录下新建ITradeLogService接口：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public interface ITradeLogService extends IService&lt;TradeLog&gt; {
    void packageAndSend(TradeLog tradeLog);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>接着在该目录下新建impl包，然后在该包下新建该接口实现类TradeLogServiceImpl：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@Service(&quot;tradeLogService&quot;)
public class TradeLogServiceImpl extends ServiceImpl&lt;TradeLogMapper, TradeLog&gt; implements ITradeLogService {

    @Override
    @GlobalTransactional
    public void packageAndSend(TradeLog tradeLog) {
        log.info(&quot;当前 XID: {}&quot;, RootContext.getXID());

        TradeLog tl = new TradeLog();
        tl.setGoodsId(tradeLog.getGoodsId());
        tl.setGoodsName(tradeLog.getGoodsName());
        tl.setStatus(&quot;打包完毕，开始物流配送！&quot;);
        tl.setCreateTime(new Date());

        this.save(tl);
        log.info(&quot;商品ID为{}，名称为{}的商品打包完毕，开始物流配送&quot;, tradeLog.getGoodsId(), tradeLog.getGoodsName());
    }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><code>packageAndSend</code>方法同样使用<code>@GlobalTransactional</code>注解标注。</p> <p>接下来我们要实现如下图所示的调用流程：</p> <p><img src="https://s2.ax1x.com/2019/12/31/l145ZD.png" alt="692.png"></p> <p>在febs-server-test的TestController中添加如下方法，供febs-server-system Feign远程调用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@RestController
public class TestController {

    @Autowired
    private ITradeLogService tradeLogService;

    ......
    
    @PostMapping(&quot;package/send&quot;)
    public void packageAndSend(@RequestBody TradeLog tradeLog) {
        tradeLogService.packageAndSend(tradeLog);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>回到febs-server-system模块，因为之前并没有在febs-server-system模块上使用Feign，所以还得稍微配置配置。在Nacos控制台中修改febs-server-system.yaml配置，添加Feign相关配置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>feign:
  hystrix:
    enabled: true

hystrix:
  shareSecurityContext: true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后在febs-server-system的入口类上添加<code>@EnableFeignClients</code>和<code>@EnableFebsOauth2FeignClient</code>注解：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@EnableFeignClients
@EnableFebsOauth2FeignClient
@SpringBootApplication
@EnableFebsServerProtect
@EnableFebsAuthExceptionHandler
@EnableTransactionManagement
@EnableDistributedTransaction
@MapperScan(&quot;cc.mrbird.febs.server.system.mapper&quot;)
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class FebsServerSystemApplication {

    public static void main(String[] args) {
        SpringApplication.run(FebsServerSystemApplication.class, args);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>因为<code>@EnableFebsOauth2FeignClient</code>、<code>@EnableFebsServerProtect</code>和<code>@EnableFebsAuthExceptionHandler</code>可以使用<code>@FebsCloudApplication</code>代替，所以上面的代码可以简化为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@EnableFeignClients
@SpringBootApplication
@FebsCloudApplication
@EnableTransactionManagement
@EnableDistributedTransaction
@MapperScan(&quot;cc.mrbird.febs.server.system.mapper&quot;)
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class FebsServerSystemApplication {

    public static void main(String[] args) {
        SpringApplication.run(FebsServerSystemApplication.class, args);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>接着在febs-server-system的cc.mrbird.febs.server.system.service目录下新建IRemoteTradeLogService，它是一个Feign Client：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@FeignClient(value = FebsServerConstant.FEBS_SERVER_TEST, contextId = &quot;tradeLogServiceClient&quot;, fallbackFactory = RemoteTradeLogServiceFallback.class)
public interface IRemoteTradeLogService {

    @PostMapping(&quot;package/send&quot;)
    void packageAndSend(@RequestBody TradeLog tradeLog);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在该目录下新建fallback包，然后在该包下新建RemoteTradeLogServiceFallback，用于处理回退：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@Component
public class RemoteTradeLogServiceFallback implements FallbackFactory&lt;IRemoteTradeLogService&gt; {
    @Override
    public IRemoteTradeLogService create(Throwable throwable) {
        return tradeLog -&gt; log.info(&quot;调用失败&quot;, throwable);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Feign Client定义好后，修改febs-server-system的TradeLogServiceImpl的orderAndPay方法，在下单支付成功后，远程调用febs-server-test的打包配送方法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@Service(&quot;tradeLogService&quot;)
public class TradeLogServiceImpl extends ServiceImpl&lt;TradeLogMapper, TradeLog&gt; implements ITradeLogService {

    @Autowired
    private IRemoteTradeLogService remoteTradeLogService;

    @Override
    @GlobalTransactional
    public void orderAndPay(TradeLog tradeLog) {
        // DynamicDataSourceContextHolder.setDataSourceKey(DataSourceKey.BASE);
        log.info(&quot;当前 XID: {}&quot;, RootContext.getXID());

        tradeLog.setCreateTime(new Date());
        tradeLog.setStatus(&quot;下单并支付成功&quot;);

        // 保存支付日志
        this.save(tradeLog);
        log.info(&quot;用户已经下单并支付成功商品ID为{}，名称为{}的商品&quot;, tradeLog.getGoodsId(), tradeLog.getGoodsName());
        // 调用远程方法，打包并配送商品
        remoteTradeLogService.packageAndSend(tradeLog);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>到这里，代码都编写完了，启动febs-auth、febs-gateway、febs-server-system和febs-server-test模块，然后使用Postman发送测试请求（请求头部需要添加令牌，这里就不演示令牌获取了，前面章节介绍许多次了）：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8jeRf.png" alt="706.png"></p> <p>请求发送成功，查看febs-server-system日志：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2020-01-01 12:13:32 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 io.seata.common.loader.EnhancedServiceLoader load TransactionManager[null] extension by class[io.seata.tm.DefaultTransactionManager]
2020-01-01 12:13:32 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 io.seata.tm.TransactionManagerHolder TransactionManager Singleton io.seata.tm.DefaultTransactionManager@6eebb6e9
2020-01-01 12:13:32 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 io.seata.common.loader.EnhancedServiceLoader load LoadBalance[null] extension by class[io.seata.discovery.loadbalance.RandomLoadBalance]
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 io.seata.tm.api.DefaultGlobalTransaction Begin new global transaction [192.168.33.1:8091:2031579909]
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 cc.mrbird.febs.server.system.service.impl.TradeLogServiceImpl 当前 XID: 192.168.33.1:8091:2031579909
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 cc.mrbird.febs.server.system.configure.seata.DynamicRoutingDataSource 当前数据源 [BASE]
2020-01-01 12:13:33 WARN  [FEBS-Server-System,,,] http-nio-8201-exec-1 io.seata.common.loader.EnhancedServiceLoader load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/RuntimeEnv
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 io.seata.common.loader.EnhancedServiceLoader load UndoLogParser[jackson] extension by class[io.seata.rm.datasource.undo.parser.JacksonUndoLogParser]
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 cc.mrbird.febs.server.system.service.impl.TradeLogServiceImpl 用户已经下单并支付成功商品ID为1，名称为homepod的商品
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] hystrix-FEBS-Server-Test-1 com.netflix.config.ChainedDynamicProperty Flipping property: FEBS-Server-Test.ribbon.ActiveConnectionsLimit to use NEXT property: niws.loadbalancer.availabilityFilteringRule.activeConnectionsLimit = 2147483647
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] hystrix-FEBS-Server-Test-1 com.netflix.loadbalancer.BaseLoadBalancer Client: FEBS-Server-Test instantiated a LoadBalancer: DynamicServerListLoadBalancer:{NFLoadBalancer:name=FEBS-Server-Test,current list of Servers=[],Load balancer stats=Zone stats: {},Server stats: []}ServerList:null
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] hystrix-FEBS-Server-Test-1 com.netflix.loadbalancer.DynamicServerListLoadBalancer Using serverListUpdater PollingServerListUpdater
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] hystrix-FEBS-Server-Test-1 com.alibaba.nacos.client.naming new ips(1) service: DEFAULT_GROUP@@FEBS-Server-Test -&gt; [{&quot;clusterName&quot;:&quot;DEFAULT&quot;,&quot;enabled&quot;:true,&quot;ephemeral&quot;:true,&quot;healthy&quot;:true,&quot;instanceHeartBeatInterval&quot;:5000,&quot;instanceHeartBeatTimeOut&quot;:15000,&quot;instanceId&quot;:&quot;192.168.28.85#8202#DEFAULT#DEFAULT_GROUP@@FEBS-Server-Test&quot;,&quot;ip&quot;:&quot;192.168.28.85&quot;,&quot;ipDeleteTimeout&quot;:30000,&quot;metadata&quot;:{&quot;preserved.register.source&quot;:&quot;SPRING_CLOUD&quot;},&quot;port&quot;:8202,&quot;serviceName&quot;:&quot;FEBS-Server-Test&quot;,&quot;weight&quot;:1.0}]
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] hystrix-FEBS-Server-Test-1 com.alibaba.nacos.client.naming current ips:(1) service: DEFAULT_GROUP@@FEBS-Server-Test -&gt; [{&quot;clusterName&quot;:&quot;DEFAULT&quot;,&quot;enabled&quot;:true,&quot;ephemeral&quot;:true,&quot;healthy&quot;:true,&quot;instanceHeartBeatInterval&quot;:5000,&quot;instanceHeartBeatTimeOut&quot;:15000,&quot;instanceId&quot;:&quot;192.168.28.85#8202#DEFAULT#DEFAULT_GROUP@@FEBS-Server-Test&quot;,&quot;ip&quot;:&quot;192.168.28.85&quot;,&quot;ipDeleteTimeout&quot;:30000,&quot;metadata&quot;:{&quot;preserved.register.source&quot;:&quot;SPRING_CLOUD&quot;},&quot;port&quot;:8202,&quot;serviceName&quot;:&quot;FEBS-Server-Test&quot;,&quot;weight&quot;:1.0}]
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] hystrix-FEBS-Server-Test-1 com.netflix.config.ChainedDynamicProperty Flipping property: FEBS-Server-Test.ribbon.ActiveConnectionsLimit to use NEXT property: niws.loadbalancer.availabilityFilteringRule.activeConnectionsLimit = 2147483647
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] hystrix-FEBS-Server-Test-1 com.netflix.loadbalancer.DynamicServerListLoadBalancer DynamicServerListLoadBalancer for client FEBS-Server-Test initialized: DynamicServerListLoadBalancer:{NFLoadBalancer:name=FEBS-Server-Test,current list of Servers=[192.168.28.85:8202],Load balancer stats=Zone stats: {unknown=[Zone:unknown;	Instance count:1;	Active connections count: 0;	Circuit breaker tripped count: 0;	Active connections per server: 0.0;]
},Server stats: [[Server:192.168.28.85:8202;	Zone:UNKNOWN;	Total Requests:0;	Successive connection failure:0;	Total blackout seconds:0;	Last connection made:Thu Jan 01 08:00:00 CST 1970;	First connection made: Thu Jan 01 08:00:00 CST 1970;	Active Connections:0;	total failure count in last (1000) msecs:0;	average resp time:0.0;	90 percentile resp time:0.0;	95 percentile resp time:0.0;	min resp time:0.0;	max resp time:0.0;	stddev resp time:0.0]
]}ServerList:com.alibaba.cloud.nacos.ribbon.NacosServerList@6f791eda
2020-01-01 12:13:33 INFO  [FEBS-Server-System,,,] http-nio-8201-exec-1 io.seata.tm.api.DefaultGlobalTransaction [192.168.33.1:8091:2031579909] commit status:Committed
2020-01-01 12:13:34 INFO  [FEBS-Server-System,,,] rpcDispatch_RMROLE_1_8 io.seata.core.rpc.netty.RmMessageListener onMessage:xid=192.168.33.1:8091:2031579909,branchId=2031579912,branchType=AT,resourceId=jdbc:mysql://127.0.0.1:3306/febs_cloud_base,applicationData=null
2020-01-01 12:13:34 INFO  [FEBS-Server-System,,,] rpcDispatch_RMROLE_1_8 io.seata.rm.AbstractRMHandler Branch committing: 192.168.33.1:8091:2031579909 2031579912 jdbc:mysql://127.0.0.1:3306/febs_cloud_base null
2020-01-01 12:13:34 INFO  [FEBS-Server-System,,,] rpcDispatch_RMROLE_1_8 io.seata.rm.AbstractRMHandler Branch commit result: PhaseTwo_Committed
2020-01-01 12:13:34 INFO  [FEBS-Server-System,,,] PollingServerListUpdater-0 com.netflix.config.ChainedDynamicProperty Flipping property: FEBS-Server-Test.ribbon.ActiveConnectionsLimit to use NEXT property: niws.loadbalancer.availabilityFilteringRule.activeConnectionsLimit = 2147483647
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>查看febs-server-test日志：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2020-01-01 12:13:33 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-1 io.seata.common.loader.EnhancedServiceLoader load TransactionManager[null] extension by class[io.seata.tm.DefaultTransactionManager]
2020-01-01 12:13:33 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-1 io.seata.tm.TransactionManagerHolder TransactionManager Singleton io.seata.tm.DefaultTransactionManager@9cb765b
2020-01-01 12:13:33 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-1 cc.mrbird.febs.server.test.service.fallback.TradeLogServiceImpl 当前 XID: 192.168.33.1:8091:2031579909
2020-01-01 12:13:33 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-1 cc.mrbird.febs.server.test.configure.seata.DynamicRoutingDataSource 当前数据源 [BASE]
2020-01-01 12:13:33 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-1 io.seata.common.loader.EnhancedServiceLoader load LoadBalance[null] extension by class[io.seata.discovery.loadbalance.RandomLoadBalance]
2020-01-01 12:13:33 WARN  [FEBS-Server-Test,,,] http-nio-8202-exec-1 io.seata.common.loader.EnhancedServiceLoader load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/RuntimeEnv
2020-01-01 12:13:33 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-1 io.seata.common.loader.EnhancedServiceLoader load UndoLogParser[jackson] extension by class[io.seata.rm.datasource.undo.parser.JacksonUndoLogParser]
2020-01-01 12:13:33 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-1 cc.mrbird.febs.server.test.service.fallback.TradeLogServiceImpl 商品ID为1，名称为homepod的商品打包完毕，开始物流配送
2020-01-01 12:13:34 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_1_8 io.seata.core.rpc.netty.RmMessageListener onMessage:xid=192.168.33.1:8091:2031579909,branchId=2031579915,branchType=AT,resourceId=jdbc:mysql://127.0.0.1:3306/febs_cloud_base,applicationData=null
2020-01-01 12:13:34 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_1_8 io.seata.rm.AbstractRMHandler Branch committing: 192.168.33.1:8091:2031579909 2031579915 jdbc:mysql://127.0.0.1:3306/febs_cloud_base null
2020-01-01 12:13:34 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_1_8 io.seata.rm.AbstractRMHandler Branch commit result: PhaseTwo_Committed
2020-01-01 12:13:43 WARN  [FEBS-Server-Test,,,] registrationTask1 de.codecentric.boot.admin.client.registration.ApplicationRegistrator Failed to register application as Application(name=FEBS-Server-Test, managementUrl=http://DESKTOP-J2ED3B7:8202/actuator, healthUrl=http://DESKTOP-J2ED3B7:8202/actuator/health, serviceUrl=http://DESKTOP-J2ED3B7:8202/) at spring-boot-admin ([http://127.0.0.1:8401/instances]): I/O error on POST request for &quot;http://127.0.0.1:8401/instances&quot;: Connect to 127.0.0.1:8401 [/127.0.0.1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:8401 [/127.0.0.1] failed: Connection refused: connect. Further attempts are logged on DEBUG level
2020-01-01 12:14:48 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_2_8 io.seata.core.rpc.netty.RmMessageListener onMessage:UndoLogDeleteRequest{resourceId='jdbc:mysql://127.0.0.1:3306/febs_cloud_base', saveDays=7, branchType=AT}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>查看数据库t_trade_log库表数据：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8jdL4.png" alt="707.png"></p> <p>可以看到流程没有问题，现在我们手动在febs-server-system的TradeLogServiceImpl的orderAndPay方法中制造一个异常，看看分布式事务是否生效：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@Service(&quot;tradeLogService&quot;)
public class TradeLogServiceImpl extends ServiceImpl&lt;TradeLogMapper, TradeLog&gt; implements ITradeLogService {

    @Autowired
    private IRemoteTradeLogService remoteTradeLogService;

    @Override
    @GlobalTransactional
    public void orderAndPay(TradeLog tradeLog) {
        // DynamicDataSourceContextHolder.setDataSourceKey(DataSourceKey.BASE);
        log.info(&quot;当前 XID: {}&quot;, RootContext.getXID());

        tradeLog.setCreateTime(new Date());
        tradeLog.setStatus(&quot;下单并支付成功&quot;);

        // 保存支付日志
        this.save(tradeLog);
        log.info(&quot;用户已经下单并支付成功商品ID为{}，名称为{}的商品&quot;, tradeLog.getGoodsId(), tradeLog.getGoodsName());
        // 调用远程方法，打包并配送商品
        remoteTradeLogService.packageAndSend(tradeLog);

        throw new RuntimeException(&quot;抛个异常~&quot;);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>重启febs-server-system，然后再次使用Postman发送测试请求：</p> <p><img src="https://s2.ax1x.com/2020/01/01/l8jheH.png" alt="708.png"></p> <p>查看febs-server-test日志：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2020-01-01 12:19:03 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-6 cc.mrbird.febs.server.test.service.fallback.TradeLogServiceImpl 当前 XID: 192.168.33.1:8091:2031579922
2020-01-01 12:19:03 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-6 cc.mrbird.febs.server.test.configure.seata.DynamicRoutingDataSource 当前数据源 [BASE]
2020-01-01 12:19:03 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-6 cc.mrbird.febs.server.test.service.fallback.TradeLogServiceImpl 商品ID为1，名称为homepod的商品打包完毕，开始物流配送
2020-01-01 12:19:03 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_3_8 io.seata.core.rpc.netty.RmMessageListener onMessage:xid=192.168.33.1:8091:2031579922,branchId=2031579928,branchType=AT,resourceId=jdbc:mysql://127.0.0.1:3306/febs_cloud_base,applicationData=null
2020-01-01 12:19:03 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_3_8 io.seata.rm.AbstractRMHandler Branch Rollbacking: 192.168.33.1:8091:2031579922 2031579928 jdbc:mysql://127.0.0.1:3306/febs_cloud_base
2020-01-01 12:19:03 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_3_8 io.seata.rm.datasource.undo.AbstractUndoLogManager xid 192.168.33.1:8091:2031579922 branch 2031579928, undo_log deleted with GlobalFinished
2020-01-01 12:19:03 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_3_8 io.seata.rm.AbstractRMHandler Branch Rollbacked result: PhaseTwo_Rollbacked
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>从日志来看，事务是回滚成功的，查看数据库t_trade_log库表数据，看看是否有脏数据：
<img src="https://s2.ax1x.com/2020/01/01/l8jdL4.png" alt="707.png"></p> <p>可以看到并没有脏数据，说明分布式事务控制是成功的。使用<code>@GlobalTransactional</code>注解默认就是AT模式，下面我们试试Seata的TCC模式。</p> <h2 id="tcc模式分布式事务控制"><a href="#tcc模式分布式事务控制" class="header-anchor">#</a> TCC模式分布式事务控制</h2> <p>修改febs-server-test的ITradeLogService接口，修改后内容如下所示：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@LocalTCC
public interface ITradeLogService extends IService&lt;TradeLog&gt; {

    @TwoPhaseBusinessAction(name = &quot;packageAndSendTccAction&quot;, commitMethod = &quot;commit&quot;, rollbackMethod = &quot;cancel&quot;)
    void packageAndSend(TradeLog tradeLog);

    boolean commit(BusinessActionContext businessActionContext);

    boolean cancel(BusinessActionContext businessActionContext);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>接口使用<code>LocalTCC</code>注解标注，表示开启TCC模式；packageAndSend方法使用<code>@TwoPhaseBusinessAction</code>标注，此注解必须设置三个属性：</p> <ol><li>name：TCC bean的名称，必须确保唯一 ；</li> <li>commitMethod：TCC过程中，Commit步骤要调用的此接口的方法名称；</li> <li>rollbackMethod：TCC过程中，Cancel步骤要调用的此接口的方法名称。</li></ol> <p>此外commit和cancel对应的方法返回类型必须为boolean，以便TCC框架知道Commit或者 Cancel的结果； 如果commit和cancel对应的方法中要获取到<code>packageAndSend</code>方法的参数，可以使用<code>@BusinessActionContextParameter(paramName = &quot;tradeLog&quot;) TradeLog tradeLog</code>，后续通过BusinessActionContext对象获取。</p> <p>修改febs-server-test接口ITradeLogService实现类：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Slf4j
@Service(&quot;tradeLogService&quot;)
public class TradeLogServiceImpl extends ServiceImpl&lt;TradeLogMapper, TradeLog&gt; implements ITradeLogService {

    private static final String TRADELOG_ID = &quot;tradelog_id&quot;;
    private ConcurrentHashMap&lt;String, Long&gt; hashMap = new ConcurrentHashMap&lt;&gt;();

    @Override
    public void packageAndSend(TradeLog tradeLog) {
        TradeLog tl = new TradeLog();
        tl.setGoodsId(tradeLog.getGoodsId());
        tl.setGoodsName(tradeLog.getGoodsName());
        tl.setStatus(&quot;打包完毕，开始物流配送！&quot;);
        tl.setCreateTime(new Date());

        this.save(tl);
        log.info(&quot;商品ID为{}，名称为{}的商品打包完毕，开始物流配送&quot;, tradeLog.getGoodsId(), tradeLog.getGoodsName());

        hashMap.put(TRADELOG_ID, tl.getId());
    }

    @Override
    public boolean commit(BusinessActionContext businessActionContext) {
        log.info(&quot;事务执行成功&quot;);
        hashMap.remove(TRADELOG_ID);
        return true;
    }

    @Override
    public boolean cancel(BusinessActionContext businessActionContext) {
        Long tradeLogId = hashMap.get(TRADELOG_ID);
        log.info(&quot;事务执行失败，回滚tradeLogId为{}的数据&quot;, tradeLogId);
        this.removeById(tradeLogId);
        hashMap.remove(TRADELOG_ID);
        return true;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>基本逻辑和TX-LCN框架的TCC模式差不多。</p> <p>重启febs-server-test，再次使用Postman发送测试请求，febs-server-test日志如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-7 cc.mrbird.febs.server.test.configure.seata.DynamicRoutingDataSource 当前数据源 [BASE]
2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] http-nio-8202-exec-7 cc.mrbird.febs.server.test.service.fallback.TradeLogServiceImpl 商品ID为1，名称为homepod的商品打包完毕，开始物流配送
2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_2_8 io.seata.core.rpc.netty.RmMessageListener onMessage:xid=192.168.33.1:8091:2031599655,branchId=2031599660,branchType=TCC,resourceId=packageAndSendTccAction,applicationData={&quot;actionContext&quot;:{&quot;sys::rollback&quot;:&quot;cancel&quot;,&quot;sys::commit&quot;:&quot;confirm&quot;,&quot;action-start-time&quot;:1577860925592,&quot;host-name&quot;:&quot;192.168.33.1&quot;,&quot;sys::prepare&quot;:&quot;packageAndSend&quot;,&quot;actionName&quot;:&quot;packageAndSendTccAction&quot;}}
2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_2_8 io.seata.rm.AbstractRMHandler Branch Rollbacking: 192.168.33.1:8091:2031599655 2031599660 packageAndSendTccAction
2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_2_8 cc.mrbird.febs.server.test.service.fallback.TradeLogServiceImpl 事务执行失败，回滚tradeLogId为21的数据
2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_2_8 cc.mrbird.febs.server.test.configure.seata.DynamicRoutingDataSource 当前数据源 [BASE]
2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_2_8 io.seata.rm.AbstractResourceManager TCC resource rollback result :true, xid:192.168.33.1:8091:2031599655, branchId:2031599660, resourceId:packageAndSendTccAction
2020-01-01 14:42:05 INFO  [FEBS-Server-Test,,,] rpcDispatch_RMROLE_2_8 io.seata.rm.AbstractRMHandler Branch Rollbacked result: PhaseTwo_Rollbacked
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>复制</p> <p>可以看到，cancel方法被执行了，查看数据库t_trade_log库表数据：</p> <p><img src="https://s2.ax1x.com/2020/01/01/lG14BD.png" alt="709.png"></p> <p>没有脏数据，分布式事务控制成功。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmrxuzha8j21hc0u0gur.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmmw9573mj21kw0w0npk.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmrru1bh9j21hc0u0qbx.jpg',
'https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200507175828.jpeg',
'https://s1.ax1x.com/2022/05/10/OtqWtO.png',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmrtnq32hj21hc0u0wnl.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/0060lm7Tly1ftg6owkw9lj31hc0u0tt9.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/0060lm7Tly1ftg6x22sgcj31hc0u0qh8.jpg',
'https://s1.ax1x.com/2022/05/10/ONPS0g.jpg',
'https://s1.ax1x.com/2022/05/10/ONCvX8.jpg',
'https://s1.ax1x.com/2022/05/10/ONCj6f.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/0060lm7Tly1ftg6omusg9j31hc0u010h.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/0060lm7Tly1ftg6p3dkm1j31hc0u04mm.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmrr7y6u3j21hc0u0k0c.jpg',
'https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200507175845.jpeg',
'https://s1.ax1x.com/2022/05/10/ONP4Cn.jpg',
'https://s1.ax1x.com/2022/05/10/ONPREQ.jpg',
'https://s1.ax1x.com/2022/05/10/ONP53q.jpg',
'https://s1.ax1x.com/2022/05/10/ONPf4s.jpg',
'https://s1.ax1x.com/2022/05/10/ONPWNj.jpg',
'https://s1.ax1x.com/2022/05/10/ONP7uT.jpg', 
'https://s1.ax1x.com/2022/05/10/ONPIg0.jpg', 
'https://s1.ax1x.com/2022/05/10/ONPovV.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmmknznonj21hc0u01l1.jpg',
'https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200507175846.jpeg',
'https://cactusmall.oss-cn-beijing.aliyuncs.com/cactusli/anime%20aesthetics%20-%20thirty-seven.gif',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmmmaptjmj21hc0u0npf.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/87c01ec7gy1frmrz8e3ytj21hc0u0wnn.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/0060lm7Tly1ftg6ozby6nj31hc0u01cf.jpg',
'https://lixuanfengs.github.io/blog-images/cactus-vuepress-img/0060lm7Tly1ftg6xc454vj31hc0u07wh.jpg',
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/lixuanfengs/cactus-vuepress-sc/edit/master/docs/《SpringCloud微服务权限系统搭建》笔记/10.分布式事务/06.基于阿里Seata方案.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/07/06, 10:17:30</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/8c9029/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">基于TX-LCN方案🌍</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/8c9029/" class="prev">基于TX-LCN方案🌍</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/118ac7/"><div>
            深圳仪器平台-开发手册记录
            <!----></div></a> <span class="date">01-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/6254d2/"><div>
            👋 该怎样设计一套“百万级API网关?”
            <!----></div></a> <span class="date">10-12</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/d9cb43/"><div>
            功能完善(算力关联、接口上报、调用反馈)
            <!----></div></a> <span class="date">10-09</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1183895890@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/lixuanfengs" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://cactusli.net" title="网站首页" target="_blank" class="iconfont icon-rss"></a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1183895890&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" class="iconfont icon-QQ"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2018-2024
    <span>Cactusli | <a href="https://github.com/lixuanfengs/cactus-vuepress/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div class="artalk"></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><!----></div></div>
    <script src="/assets/js/app.d73578e6.js" defer></script><script src="/assets/js/2.f6444e8b.js" defer></script><script src="/assets/js/382.ff24e162.js" defer></script><script src="/assets/js/13.9ca28764.js" defer></script><script src="/assets/js/6.0f00df03.js" defer></script><script src="/assets/js/5.1368437e.js" defer></script><script src="/assets/js/4.7c9e6596.js" defer></script>
  </body>
</html>
